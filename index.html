<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Restfullyii : Adds RESTFull API to your Yii application" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Restfullyii</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/evan108108/RESTFullYii">View on GitHub</a>

          <h1 id="project_title">Restfullyii</h1>
          <h2 id="project_tagline">Adds RESTFull API to your Yii application</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/evan108108/RESTFullYii/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/evan108108/RESTFullYii/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="starship--restfullyii" class="anchor" href="#starship--restfullyii"><span class="octicon octicon-link"></span></a><em>Starship / RestfullYii</em>
</h1>

<p>Makes quickly adding a RESTFul API to your Yii project easy. RestfullYii provides full HTTP verb support (GET, PUT, POST, DELETE) for your resources, as well as the ability to offset, limit, sort, filter, etcâ€¦ . You will also have the ability to read and manipulate related data with ease.</p>

<p>RestfullYii has been lovingly rebuilt from the metal and is now 100% test covered! The new event based architecture allows for clean and unlimited customization.</p>

<h2>
<a name="how-it-works" class="anchor" href="#how-it-works"><span class="octicon octicon-link"></span></a>How it works</h2>

<p>RestfullYii adds a new set of RESTFul routes to your standard routes, but prepends '/api' .</p>

<p>So if you apply RestfullYii to the 'WorkController' you will get the following new routes by default.</p>

<pre><code>[GET] http://yoursite.com/api/work (returns all works)
[GET] http://yoursite.com/api/work/1 (returns work with PK=1)
[POST] http://yoursite.com/api/work (create new work)
[PUT] http://yoursite.com/api/work/1 (update work with PK=1)
[DELETE] http://yoursite.com/api/work/1 (delete work with PK=1)
</code></pre>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>PHP 5.4.0 (or later)*</li>
<li>YiiFramework 1.1.14 (or later)</li>
<li>
<p>PHPUnit 3.7 (or later) to run tests.</p>

<p><em>For older versions of PHP (&lt; 5.4) checkout <a href="https://github.com/evan108108/RESTFullYii/tree/v1.15">v1.15</a></em></p>
</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a name="installing-manually" class="anchor" href="#installing-manually"><span class="octicon octicon-link"></span></a>Installing Manually</h3>

<ol>
<li><p>Download and place the 'starship' directory in your Yii extension directory.</p></li>
<li><p>In config/main.php you will need to add the RestfullYii alias. This allows for flexability in where you place the extension.</p></li>
</ol><div class="highlight highlight-php"><pre>    <span class="s1">'aliases'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="o">..</span> <span class="o">.</span>
        <span class="s1">'RestfullYii'</span> <span class="o">=&gt;</span><span class="nb">realpath</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/../extensions/starship/RestfullYii'</span><span class="p">),</span>
        <span class="o">..</span> <span class="o">.</span>
    <span class="p">),</span>
</pre></div>

<ol>
<li>Include ext.starship.RestfullYii.config.routes in your main config (see below) or copy the routes and paste them in your components-&gt;urlManager-&gt;rules in same config.<br>
</li>
</ol><div class="highlight highlight-php"><pre>    <span class="s1">'components'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'urlManager'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'urlFormat'</span> <span class="o">=&gt;</span> <span class="s1">'path'</span><span class="p">,</span>
            <span class="s1">'rules'</span> <span class="o">=&gt;</span> <span class="k">require</span><span class="p">(</span>
                <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span><span class="o">.</span><span class="s1">'/../extensions/starship/restfullyii/config/routes.php'</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
</pre></div>

<h3>
<a name="installing-with-composer" class="anchor" href="#installing-with-composer"><span class="octicon octicon-link"></span></a>Installing With <a href="http://getcomposer.org">Composer</a>
</h3>

<div class="highlight highlight-JSON"><pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"starship/restfullyii"</span><span class="p">:</span> <span class="s2">"dev-master"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<ol>
<li>In config/main.php you will need to add the RestfullYii alias. This allows for flexability in where you place the extension.</li>
</ol><div class="highlight highlight-php"><pre>    <span class="s1">'aliases'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="o">..</span> <span class="o">.</span>
        <span class="c1">//Path to your Composer vendor dir plus starship/restfullyii path</span>
        <span class="s1">'RestfullYii'</span> <span class="o">=&gt;</span><span class="nb">realpath</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/../../../vendor/starship/restfullyii/starship/RestfullYii'</span><span class="p">),</span>
        <span class="o">..</span> <span class="o">.</span>
    <span class="p">),</span>
</pre></div>

<ol>
<li>Include ext.starship.RestfullYii.config.routes in your main config (see below) or copy the routes and paste them in your components-&gt;urlManager-&gt;rules in same config.<br>
</li>
</ol><div class="highlight highlight-php"><pre>    <span class="s1">'components'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'urlManager'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'urlFormat'</span> <span class="o">=&gt;</span> <span class="s1">'path'</span><span class="p">,</span>
            <span class="s1">'rules'</span> <span class="o">=&gt;</span> <span class="k">require</span><span class="p">(</span>
                <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span><span class="o">.</span><span class="err">'</span><span class="o">/../../../</span><span class="nx">vendor</span><span class="o">/</span><span class="nx">starship</span><span class="o">/</span><span class="nx">restfullyii</span><span class="o">/</span><span class="nx">starship</span><span class="o">/</span><span class="nx">RestfullYii</span><span class="o">/</span><span class="nx">config</span><span class="o">/</span><span class="nx">routes</span><span class="o">.</span><span class="nx">php</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
</pre></div>

<h2>
<a name="controller-setup" class="anchor" href="#controller-setup"><span class="octicon octicon-link"></span></a>Controller Setup</h2>

<p>Adding a set of RESTFul actions to a controller.</p>

<ol>
<li>
<p>Add the ERestFilter to your controllers filter method.</p>

<div class="highlight highlight-php"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">filters</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'accessControl'</span><span class="p">,</span> <span class="c1">// perform access control for CRUD operations</span>
        <span class="k">array</span><span class="p">(</span>
            <span class="s1">'RestfullYii.filters.ERestFilter + </span>
<span class="s1">            REST.GET, REST.PUT, REST.POST, REST.DELETE'</span>
        <span class="p">),</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</li>
<li>
<p>Add the ERestActionProvider to your controllers actions method.</p>

<div class="highlight highlight-php"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">actions</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'REST.'</span><span class="o">=&gt;</span><span class="s1">'RestfullYii.actions.ERestActionProvider'</span><span class="p">,</span>
    <span class="p">);</span>
<span class="p">}</span>   
</pre></div>
</li>
<li>
<p>If you are using the accessControl filter you need to make sure that access is allowed on all RESTFul routes.</p>

<div class="highlight highlight-php"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">accessRules</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span><span class="s1">'allow'</span><span class="p">,</span> <span class="s1">'actions'</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">'REST.GET'</span><span class="p">,</span> <span class="s1">'REST.PUT'</span><span class="p">,</span> <span class="s1">'REST.POST'</span><span class="p">,</span> <span class="s1">'REST.DELETE'</span><span class="p">),</span>
        <span class="s1">'users'</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">'*'</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="k">array</span><span class="p">(</span><span class="s1">'deny'</span><span class="p">,</span>  <span class="c1">// deny all users</span>
            <span class="s1">'users'</span><span class="o">=&gt;</span><span class="k">array</span><span class="p">(</span><span class="s1">'*'</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</li>
</ol><h2>
<a name="making-requests" class="anchor" href="#making-requests"><span class="octicon octicon-link"></span></a>Making Requests</h2>

<p>To understand how to make RestfullYii API requests its best to look at a few examples. Code examples will be shown first in JavaScript* as an AJAX user* and then using CURL.  </p>

<p><em>* JS examples use jQuery</em></p>

<p><em>* Default validation for an AJAX user is !Yii::app()-&gt;user-&gt;isGuest so the user must be logged in for this type of request.</em></p>

<h3>
<a name="get-requests" class="anchor" href="#get-requests"><span class="octicon octicon-link"></span></a>GET Requests</h3>

<h4>
<a name="getting-a-list-or-resources-workcontroller" class="anchor" href="#getting-a-list-or-resources-workcontroller"><span class="octicon octicon-link"></span></a>Getting a list or resources (WorkController)</h4>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work'</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"GET"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\ 
http://my-site.com/api/work
</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record(s) Found"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"30"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title1"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content1"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-07 10:09:41"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title2"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content2"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-08 11:01:11"</span>
            <span class="p">},</span>
            <span class="err">.</span> <span class="err">.</span> <span class="err">.</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   

</pre></div>

<h4>
<a name="getting-a-single-resource-workcontroller" class="anchor" href="#getting-a-single-resource-workcontroller"><span class="octicon octicon-link"></span></a>Getting a single resource (WorkController)</h4>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work/1'</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"GET"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\
http://my-site.com/api/work/1
</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record Found"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title1"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content1"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-07 10:09:41"</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   
</pre></div>

<h3>
<a name="get-request-limit--offset-workcontroller" class="anchor" href="#get-request-limit--offset-workcontroller"><span class="octicon octicon-link"></span></a>GET Request: Limit &amp; Offset (WorkController)</h3>

<p>You can limit and paginate through your results by adding the limit and offset variables to the request query string.</p>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work?limit=10&amp;offset=30'</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"GET"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\
http://my-site.com/api/work?limit=10&amp;offset=30
</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record(s) Found"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"30"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"11"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title11"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"11"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content11"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-11 11:10:09"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title12"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"12"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content12"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-08 12:11:10"</span>
            <span class="p">},</span>
            <span class="err">.</span> <span class="err">.</span> <span class="err">.</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   

</pre></div>

<h3>
<a name="get-request-sorting-results-workcontroller" class="anchor" href="#get-request-sorting-results-workcontroller"><span class="octicon octicon-link"></span></a>GET Request: Sorting results (WorkController)</h3>

<p>You can sort your results by any valid param or multiple params as well as provide a sort direction (ASC or DESC). sort=[{"property":"title", "direction":"DESC"}, {"property":"create_time", "direction":"ASC"}]</p>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work?sort=[{"property":"title", "direction":"DESC"}, {"property":"create_time", "direction":"ASC"}]'</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"GET"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\
http://my-site.com/api/work?sort=%5B%7B%22property%22%3A%22title%22%2C+%22direction%22%3A%22DESC%22%7D%2C+%7B%22property%22%3A%22create_time%22%2C+%22direction%22%3A%22ASC%22%7D%5D
</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record(s) Found"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"30"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"29"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title30b"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"29"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content30b"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-07 14:05:01"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"30"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title30"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"30"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content30"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-08 09:10:09"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"28"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title28"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"28"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content28"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-09 14:05:01"</span>
            <span class="p">},</span>
            <span class="err">.</span> <span class="err">.</span> <span class="err">.</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   

</pre></div>

<h3>
<a name="get-request-filtering-results-workcontroller" class="anchor" href="#get-request-filtering-results-workcontroller"><span class="octicon octicon-link"></span></a>GET Request: Filtering results (WorkController)</h3>

<p>You can filter your results by any valid param or multiple params as well as an operator.</p>

<p>Available filter operators:</p>

<ul>
<li>in</li>
<li>not in</li>
<li>=</li>
<li>!=</li>
<li>&gt;</li>
<li>&gt;=</li>
<li>&lt;</li>
<li>&lt;=</li>
<li>No operator is "LIKE"</li>
</ul><pre><code>/api/post/?filter = [
  {"property": "id", "value" : 50, "operator": "&gt;="}
, {"property": "user_id", "value" : [1, 5, 10, 14], "operator": "in"}
, {"property": "state", "value" : ["save", "deleted"], "operator": "not in"}
, {"property": "date", "value" : "2013-01-01", "operator": "&gt;="}
, {"property": "date", "value" : "2013-01-31", "operator": "&lt;="}
, {"property": "type", "value" : 2, "operator": "!="}
]
</code></pre>

<h3>
<a name="post-requests-creating-new-resources" class="anchor" href="#post-requests-creating-new-resources"><span class="octicon octicon-link"></span></a>POST Requests (Creating new resources)</h3>

<p>With POST requests we must include the resource data as a JSON object in the request body.</p>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">postData</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"title31"</span><span class="p">,</span>
    <span class="s2">"author_id"</span><span class="o">:</span> <span class="s2">"31"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="o">:</span> <span class="s2">"content31"</span><span class="p">,</span>
    <span class="s2">"create_time"</span><span class="o">:</span> <span class="s2">"2013-08-20 09:23:14"</span>
<span class="p">};</span>

 <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work'</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">postData</span><span class="p">)</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"POST"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
<span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -l -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\
-X POST -d '{"title": "title31", "author_id": "31", "content": "content31", "create_time": "2013-08-20 09:23:14"}' http://my-site.com/api/work
</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record Created"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"31"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title31"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"31"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content31"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-20 09:23:14"</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   
</pre></div>

<h3>
<a name="put-requests-updating-existing-resources" class="anchor" href="#put-requests-updating-existing-resources"><span class="octicon octicon-link"></span></a>PUT Requests (Updating existing resources)</h3>

<p>With PUT requests like POST requests we must include the resource data as a JSON object in the request body.</p>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">postData</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"31"</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"title31"</span><span class="p">,</span>
    <span class="s2">"author_id"</span><span class="o">:</span> <span class="s2">"31"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="o">:</span> <span class="s2">"content31"</span><span class="p">,</span>
    <span class="s2">"create_time"</span><span class="o">:</span> <span class="s2">"2013-08-20 09:23:14"</span>
<span class="p">};</span>

 <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work/31'</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">postData</span><span class="p">)</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"PUT"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
<span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -l -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\
-X PUT -d '{"id": "31", "title": "title31", "author_id": "31", "content": "content31", "create_time": "2013-08-20 09:23:14"}' http://my-site.com/api/work/31
</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record Updated"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"31"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title31"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"31"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content31"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-20 09:23:14"</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   
</pre></div>

<h3>
<a name="delete-requests-delete-a-resource" class="anchor" href="#delete-requests-delete-a-resource"><span class="octicon octicon-link"></span></a>DELETE Requests (Delete a resource)</h3>

<p>JavaScript:</p>

<div class="highlight highlight-javascript"><pre> <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s1">'/api/work/1'</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span><span class="s2">"DELETE"</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span><span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">ajaxOptions</span><span class="p">,</span> <span class="nx">thrownError</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">});</span> 
</pre></div>

<p>CURL:</p>

<pre lang="shell"><code>curl -l -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access"\
"X-HTTP-Method-Override: DELETE" -X DELETE http://my-site.com/api/work/1

</code></pre>

<p>Response:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span><span class="s2">"Record Deleted"</span><span class="p">,</span>
    <span class="nt">"data"</span><span class="p">:{</span>
        <span class="nt">"totalCount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span>
        <span class="nt">"work"</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="nt">"title"</span><span class="p">:</span> <span class="s2">"title1"</span><span class="p">,</span>
                <span class="nt">"author_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
                <span class="nt">"content"</span><span class="p">:</span> <span class="s2">"content1"</span><span class="p">,</span>
                <span class="nt">"create_time"</span><span class="p">:</span> <span class="s2">"2013-08-07 10:09:41"</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>   
</pre></div>

<h3>
<a name="sub-resources" class="anchor" href="#sub-resources"><span class="octicon octicon-link"></span></a>Sub-Resources</h3>

<p>When working with 'many to many' relations you now have the ability to treat them as sub-resources.  </p>

<p>Consider:  </p>

<pre><code>URL Format: http://mysite.com/api/&lt;controller&gt;/&lt;id&gt;/&lt;many_many_relation&gt;/&lt;many_many_relation_id&gt;

Getting player 3 who is on team 1  
or simply checking whether player 3 is on that team (200 vs. 404)  
GET /api/team/1/players/3  

getting player 3 who is also on team 3  
GET /api/team/3/players/3  

Adding player 3 also to team 2  
PUT /api/team/2/players/3  

Getting all teams of player 3  
GET /api/player/3/teams  

Remove player 3 from team 1 (Injury)
DELETE /api/team/1/players/3  

Team 1 found a replacement, who is not registered in league yet  
POST /api/player  

From payload you get back the id, now place it officially to team 1  
PUT /api/team/1/players/44  
</code></pre>

<h2>
<a name="customization--configuration" class="anchor" href="#customization--configuration"><span class="octicon octicon-link"></span></a>Customization &amp; Configuration</h2>

<p>RestfullYii's default behaviors can be easily customized though the built-in event system. Almost all aspects of RestFullYii's request / response handling trigger events. Changing RestfullYii's behaviors is as simple as registering the appropriate event handlers. Event handlers can be registered both globally (in the main config) and locally (at the controller level).</p>

<p>To understand how to do this, lets create a scenario that requires some customization and see how we might accomplish it.</p>

<p>Lets say we have two controllers in our API, WorkController and CategoryController. We would like our API to function in the following ways:</p>

<ol>
<li>The API should be accessible to JavaScript via AJAX.</li>
<li>The API should not be accessible to any external client.</li>
<li>Only registered users should be allowed to view Work and Category resources.</li>
<li>Only users with the permission REST-UPDATE should be allowed to update works.</li>
<li>Only users with the permission REST-CREATE should be allowed to create works.</li>
<li>Only users with the permission REST-DELETE should be allowed to delete works.</li>
<li>Create, update and delete on categories should be disallowed for all API users.</li>
</ol><p>Now that we know how we would like our API to function, lets take a look at the list above and determine which features can be implemented globally. Since 1, 2 and 3 effect both of our controllers, we can effect these globally by registering a few callbacks in our config/main.php.</p>

<p>To accomplish 1 &amp; 3 we don't have to do anything as this is RestfullYii's default behavior, so that leaves 2. By default RestfullYii does allow access to external clients which is not what we want. Lets change it!</p>

<p>In the /protected/config/main.php params section we will add the following:</p>

<div class="highlight highlight-php"><pre><span class="nv">$config</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="o">..</span><span class="p">,</span>
    <span class="s1">'params'</span><span class="o">=&gt;</span><span class="p">[</span>
        <span class="s1">'RestfullYii'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'req.auth.user'</span><span class="o">=&gt;</span><span class="k">function</span><span class="p">(</span><span class="nv">$application_id</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">},</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">);</span>
</pre></div>

<p>This tells RestfullYii that when the event 'req.auth.user' is handled it should always return false. Returning false will deny access (true grants it). Similarly validating an AJAX user has it's own event 'req.auth.ajax.user' which (as mentioned earlier) allows access to registered users by default.</p>

<p>That takes care of our global config and we can now focus on features 4-7 while taking care not to break feature 3. Since features 4-6 involve the work controller and user permissions, we can accomplish all of those at the same time. Remember RestfullYii's default behavior is to allow all registered users complete API access and again this is not what we want. Lets change it!</p>

<p>We will now register an event handler locally in the WorkController; To do this we will need to add a special public method in the WorkController called 'restEvents'. Then once we have the 'restEvents' method we can use one other special method 'onRest' to register our event handler. We can call 'onRest' using '$this-&gt;onRest()'. 'onRest' takes two params the first is the event name and the second is a Callable that will actually handle the event. This Callable is bound to the controller so the $this context inside the Callable always refers to the current controller. This is true for event handlers registered both globally as well as locally.</p>

<p>Now we are ready modify the output of event handler 'req.auth.ajax.user', but this time instead of overriding the default behavior, we will use the post-filter feature to add our additional user validation. The event name of a post-filter event is always the main event name prefixed with 'post.filter.', thus in our case the event name is 'post.filter.req.auth.ajax.user'. The param(s) passed into a post-filter handler are always the value(s) returned from the main event. Take a look:</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">WorkController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="o">..</span> <span class="o">.</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">restEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.ajax.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">switch</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getAction</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">case</span> <span class="s1">'REST.POST'</span><span class="o">:</span>
                    <span class="k">return</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="o">-&gt;</span><span class="na">checkAccess</span><span class="p">(</span><span class="s1">'REST-CREATE'</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">'REST.POST'</span><span class="o">:</span>
                    <span class="k">return</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="o">-&gt;</span><span class="na">checkAccess</span><span class="p">(</span><span class="s1">'REST-UPDATE'</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">'REST.DELETE'</span><span class="o">:</span>
                    <span class="k">return</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="o">-&gt;</span><span class="na">checkAccess</span><span class="p">(</span><span class="s1">'REST-DELETE'</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="o">..</span> <span class="o">.</span>
<span class="p">}</span>
</pre></div>

<p>Cool! That just leaves feature 7, disallowing create, update, delete on category. Again we will add this change locally, but this time to the CategoryController. Take a look:</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">CategoryController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="o">..</span> <span class="o">.</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">restEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.ajax.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getAction</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'REST.GET'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="o">..</span> <span class="o">.</span>
<span class="p">}</span>

</pre></div>

<p>We now have all features implemented! </p>

<h2>
<a name="defining-custom-routes" class="anchor" href="#defining-custom-routes"><span class="octicon octicon-link"></span></a>Defining Custom Routes</h2>

<p>Custom routes are very simple to define as all you really need to do is create an event handler for your route and http verb combination (event name = 'req.&lt;verb&gt;.&lt;route_name&gt;.render').  Lets take a look at some examples.</p>

<p>Here is the list of routes we would like to add to our api:</p>

<ol>
<li><p>[GET] /api/category/active </p></li>
<li><p>[GET] /api/work/special/&lt;param1&gt;</p></li>
<li><p>[PUT] /api/work/special/&lt;param1&gt;/&lt;param2&gt;</p></li>
<li><p>[POST] /api/work/special/&lt;param1&gt;</p></li>
<li><p>[DELETE] /api/work/special/&lt;param1&gt;/&lt;param2&gt;</p></li>
</ol><h3>
<a name="custom-route-1" class="anchor" href="#custom-route-1"><span class="octicon octicon-link"></span></a>Custom Route 1</h3>

<p>As you tell from the route the request will be handled by the Category controller. So that is where we will add our event handler.</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">CategoryController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="o">..</span> <span class="o">.</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">restEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.get.active.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">//Custom logic for this route.</span>
            <span class="c1">//Should output results.</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">emitRest</span><span class="p">(</span><span class="s1">'req.render.json'</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">[</span>
                    <span class="s1">'type'</span><span class="o">=&gt;</span><span class="s1">'raw'</span><span class="p">,</span>
                    <span class="s1">'data'</span><span class="o">=&gt;</span><span class="p">[</span><span class="s1">'active'</span><span class="o">=&gt;</span><span class="k">true</span><span class="p">]</span>
                <span class="p">]</span>
            <span class="p">])</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="custom-routes-2-5" class="anchor" href="#custom-routes-2-5"><span class="octicon octicon-link"></span></a>Custom Routes 2-5</h3>

<p>These routes all involve the Work controller. So that is where we will add our event handlers.</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">WorkController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="o">..</span> <span class="o">.</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">restEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.get.special.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$param1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="nx">CJSON</span><span class="o">::</span><span class="na">encode</span><span class="p">([</span><span class="s1">'param1'</span><span class="o">=&gt;</span><span class="nv">$param1</span><span class="p">]);</span>
        <span class="p">});</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.put.special.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$param1</span><span class="p">,</span> <span class="nv">$param2</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//$data is the data sent in the PUT</span>
            <span class="k">echo</span> <span class="nx">CJSON</span><span class="o">::</span><span class="na">encode</span><span class="p">([</span><span class="s1">'data'</span><span class="o">=&gt;</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$param1</span><span class="p">,</span> <span class="nv">$param2</span><span class="p">]);</span>
        <span class="p">});</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.post.special.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$param1</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//$data is the data sent in the POST</span>
            <span class="k">echo</span> <span class="nx">CJSON</span><span class="o">::</span><span class="na">encode</span><span class="p">([</span><span class="s1">'data'</span><span class="o">=&gt;</span><span class="nv">$data</span><span class="p">,</span> <span class="s1">'param1'</span><span class="o">=&gt;</span><span class="nv">$param1</span><span class="p">,</span> <span class="s1">'param2'</span><span class="o">=&gt;</span><span class="nv">$param2</span><span class="p">]);</span>
        <span class="p">});</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.delete.special.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$param1</span><span class="p">,</span> <span class="nv">$param2</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="nx">CJSON</span><span class="o">::</span><span class="na">encode</span><span class="p">([</span><span class="s1">'param1'</span><span class="o">=&gt;</span><span class="nv">$param1</span><span class="p">,</span> <span class="s1">'param2'</span><span class="o">=&gt;</span><span class="nv">$param2</span><span class="p">]);</span>
        <span class="p">});</span>
    <span class="p">}</span>

</pre></div>

<h2>
<a name="cors-requests-cross-origin-resource-sharing" class="anchor" href="#cors-requests-cross-origin-resource-sharing"><span class="octicon octicon-link"></span></a>CORS Requests (Cross-Origin Resource Sharing)</h2>

<p>Making cross origin requests from Javascript is now possible with RESTFullYii! RESTFullYii has several CORS specific events that help making CORS requests easy.</p>

<p>Lets suppose you have the following setup; An API server with the domain <a href="http://rest-api-server.back">http://rest-api-server.back</a> and a client application at the domain <a href="http://my-js-client-app.front">http://my-js-client-app.front</a>. Obviously you would like to make requests from your front end client application (my-js-client-app.front) to your backend API server (rest-api-server.back). </p>

<h5>
<a name="1-the-first-thing-you-will-need-to-do-is-let-restfullyii-know-that-my-js-client-appfront-is-allowed-to-make-requests-to-a-given-resource-or-resources" class="anchor" href="#1-the-first-thing-you-will-need-to-do-is-let-restfullyii-know-that-my-js-client-appfront-is-allowed-to-make-requests-to-a-given-resource-or-resources"><span class="octicon octicon-link"></span></a>1) The first thing you will need to do is let RESTFullYii know that my-js-client-app.front is allowed to make requests to a given resource or resources.</h5>

<p>Lets say we want to allow our app to make requests to the 'Artist' resource only. So lets add an event hook in our ArtistController</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">ArtistController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">restEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.allow.origin'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">'http://my-js-client-app.front'</span><span class="p">];</span> <span class="c1">//List of sites allowed to make CORS requests </span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></div>

<p>If you would like to allow my-js-client-app.front to access other resource you simply repeat this process in the appropriate controller(s) or apply it globally in your main config params (see above examples).</p>

<h5>
<a name="2-we-need-to-determine-is-the-types-of-requests-we-would-like-to-allow-by-default-restfullyii-will-allow-get--post-but-for-our-application-we-would-like-put--delete-as-well" class="anchor" href="#2-we-need-to-determine-is-the-types-of-requests-we-would-like-to-allow-by-default-restfullyii-will-allow-get--post-but-for-our-application-we-would-like-put--delete-as-well"><span class="octicon octicon-link"></span></a>2) We need to determine is the types of requests we would like to allow. By default RESTFullYii will allow GET &amp; POST but for our application we would like PUT &amp; DELETE as well.</h5>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">ArtistController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">restEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.allow.origin'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">'http://my-js-client-app.front'</span><span class="p">];</span> <span class="c1">//List of sites allowed to make CORS requests </span>
        <span class="p">});</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.allow.methods'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'PUT'</span><span class="p">,</span> <span class="s1">'DELETE'</span><span class="p">];</span> <span class="c1">//List of allowed http methods (verbs) </span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>This is the minimum configuration but there are more available; See (<a href="#req.cors.access.control.allow.headers">req.cors.access.control.allow.headers</a>, <a href="#req.cors.access.control.max.age">req.cors.access.control.max.age</a>, <a href="#req.auth.cors">req.auth.cors</a>)</p>

<h5>
<a name="3-now-that-our-server-is-set-up-to-allow-cors-requests-we-are-ready-to-send-requests-from-our-client-httpmy-js-client-appfront" class="anchor" href="#3-now-that-our-server-is-set-up-to-allow-cors-requests-we-are-ready-to-send-requests-from-our-client-httpmy-js-client-appfront"><span class="octicon octicon-link"></span></a>3) Now that our server is set up to allow CORS requests we are ready to send requests from our client @<a href="http://my-js-client-app.front">http://my-js-client-app.front</a>
</h5>

<div class="highlight highlight-javascript"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">"GET"</span><span class="p">,</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s2">"http://rest-api-server.back/api/artist"</span><span class="p">,</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">'X_REST_CORS'</span><span class="o">:</span> <span class="s1">'Yes'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">response</span> <span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">error</span> <span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s2">"ERROR:"</span><span class="p">,</span> <span class="nx">error</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h6>
<a name="notice-the-headers-object-in-the-jquery-request-above-it-is-required-that-you-send-x_rest_cors-yes" class="anchor" href="#notice-the-headers-object-in-the-jquery-request-above-it-is-required-that-you-send-x_rest_cors-yes"><span class="octicon octicon-link"></span></a>*Notice the headers object in the jQuery request above. It is required that you send <code>X_REST_CORS: 'Yes'</code>
</h6>

<h4>
<a name="thats-it-you-are-making-sweet-cors" class="anchor" href="#thats-it-you-are-making-sweet-cors"><span class="octicon octicon-link"></span></a>That's it! You are making sweet CORS!</h4>

<h2>
<a name="events" class="anchor" href="#events"><span class="octicon octicon-link"></span></a>Events</h2>

<p>List of all events and their default event handlers.</p>

<table>
<thead><tr>
<th>Event</th>
<th>Pre-Filter</th>
<th>Post-Filter</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>Configuration Events</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#config.application.id">config.application.id</a></td>
<td><a href="#pre.filter.config.application.id">Yes</a></td>
<td><a href="#post.filter.config.application.id">Yes</a></td>
<td>Returns the app id that is applied to header vars (username, password)</td>
</tr>
<tr>
<td><a href="#config.dev.flag">config.dev.flag</a></td>
<td><a href="#pre.filter.config.dev.flag">Yes</a></td>
<td><a href="#post.filter.config.dev.flag">Yes</a></td>
<td>Return true to set develop mode; False to turn of develop mode</td>
</tr>
<tr>
<td>Request Events</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#req.event.logger">req.event.logger</a></td>
<td>No</td>
<td>No</td>
<td>Logs events</td>
</tr>
<tr>
<td><a href="#req.disable.cweblogroute">req.disable.cweblogroute</a></td>
<td><a href="#pre.filter.req.disable.cweblogroute">Yes</a></td>
<td><a href="#post.filter.req.disable.cweblogroute">Yes</a></td>
<td>Disable CWebLogRoute (True by default)</td>
</tr>
<tr>
<td><a href="#req.auth.https.only">req.auth.https.only</a></td>
<td><a href="#pre.filter.req.auth.https.only">Yes</a></td>
<td><a href="#post.filter.req.auth.https.only">Yes</a></td>
<td>Return true to restrict to https; false to allow http or https</td>
</tr>
<tr>
<td><a href="#req.auth.username">req.auth.username</a></td>
<td><a href="#pre.filter.req.auth.username">Yes</a></td>
<td><a href="#post.filter.req.auth.username">Yes</a></td>
<td>This is the username used to grant access to non-ajax users. At a minimum you should change this value</td>
</tr>
<tr>
<td><a href="#req.auth.password">req.auth.password</a></td>
<td><a href="#pre.filter.req.auth.password">Yes</a></td>
<td><a href="#post.filter.req.auth.password">Yes</a></td>
<td>This is the password use to grant access to non-ajax users. At a minimum you should change this value</td>
</tr>
<tr>
<td><a href="#req.auth.user">req.auth.user</a></td>
<td><a href="#pre.filter.req.auth.user">Yes</a></td>
<td><a href="#post.filter.req.auth.user">Yes</a></td>
<td>Used to validate a non-ajax user; return true to allow; false to deny</td>
</tr>
<tr>
<td><a href="#req.auth.ajax.user">req.auth.ajax.user</a></td>
<td><a href="#pre.filter.req.auth.ajax.user">Yes</a></td>
<td><a href="#post.filter.req.auth.ajax.user">Yes</a></td>
<td>Used to validate a an ajax user; return true to allow; false to deny</td>
</tr>
<tr>
<td><a href="#req.auth.type">req.auth.type</a></td>
<td><a href="#pre.filter.req.auth.type">Yes</a></td>
<td><a href="#post.filter.req.auth.type">Yes</a></td>
<td>returns the authorization type (1=CORS, 2=USER_PASS, 3=AJAX)</td>
</tr>
<tr>
<td><a href="#req.cors.access.control.allow.origin">req.cors.access.control.allow.origin</a></td>
<td><a href="#pre.filter.req.cors.access.control.allow.origin">Yes</a></td>
<td><a href="#post.filter.req.cors.access.control.allow.origin">Yes</a></td>
<td>returns the allowed remote origins durring a CORS request</td>
</tr>
<tr>
<td><a href="#req.cors.access.control.allow.methods">req.cors.access.control.allow.methods</a></td>
<td><a href="#pre.filter.req.cors.access.control.allow.methods">Yes</a></td>
<td><a href="#post.filter.req.cors.access.control.allow.methods">Yes</a></td>
<td>returns the allowed http methods/verbs for a CORS request</td>
</tr>
<tr>
<td><a href="#req.cors.access.control.allow.headers">req.cors.access.control.allow.headers</a></td>
<td><a href="#pre.filter.req.cors.access.control.allow.headers">Yes</a></td>
<td><a href="#post.filter.req.cors.access.control.allow.headers">Yes</a></td>
<td>returns the allowed headers for a CORS request</td>
</tr>
<tr>
<td><a href="#req.cors.access.control.max.age">req.cors.access.control.max.age</a></td>
<td><a href="#pre.filter.req.cors.access.control.max.age">Yes</a></td>
<td><a href="#post.filter.req.cors.access.control.max.age">Yes</a></td>
<td>Used in a CORS request to indicate how long the response can be cached (seconds)</td>
</tr>
<tr>
<td><a href="#req.auth.cors">req.auth.cors</a></td>
<td><a href="#pre.filter.req.auth.cors">Yes</a></td>
<td><a href="#post.filter.req.auth.cors">Yes</a></td>
<td>returns the authorization true if the CORS request is authorized and false if not</td>
</tr>
<tr>
<td><a href="#req.auth.uri">req.auth.uri</a></td>
<td><a href="#pre.filter.req.auth.uri">Yes</a></td>
<td><a href="#post.filter.req.auth.uri">Yes</a></td>
<td>grant / deny access based on the URI and or HTTP verb</td>
</tr>
<tr>
<td><a href="#req.after.action">req.after.action</a></td>
<td><a href="#pre.filter.req.after.action">Yes</a></td>
<td><a href="#post.filter.req.after.action">Yes</a></td>
<td>Called after the request has been fulfilled. By default it has no behavior</td>
</tr>
<tr>
<td><a href="#req.param.is.pk">req.param.is.pk</a></td>
<td><a href="#pre.filter.req.param.is.pk">Yes</a></td>
<td><a href="#post.filter.req.param.is.pk">Yes</a></td>
<td>Called when attempting to validate a resources primary key. The default is an integer. Return true to confirm Primary Key; False to deny primary key.</td>
</tr>
<tr>
<td><a href="#req.data.read">req.data.read</a></td>
<td><a href="#pre.filter.req.data.read">Yes</a></td>
<td><a href="#post.filter.req.data.read">Yes</a></td>
<td>Called when reading data on POST &amp; PUT requests</td>
</tr>
<tr>
<td><a href="#req.get.resource.render">req.get.resource.render</a></td>
<td><a href="#pre.filter.req.get.resource.render">Yes</a></td>
<td>No</td>
<td>Called when a GET request for a single resource is to be rendered</td>
</tr>
<tr>
<td><a href="#req.get.resources.render">req.get.resources.render</a></td>
<td><a href="#pre.filter.req.get.resources.render">Yes</a></td>
<td>No</td>
<td>Called when a GET request for when a list resources is to be rendered</td>
</tr>
<tr>
<td><a href="#req.put.resource.render">req.put.resource.render</a></td>
<td><a href="#pre.filter.req.put.resource.render">Yes</a></td>
<td>No</td>
<td>Called when a PUT request for a single resource is to be rendered</td>
</tr>
<tr>
<td><a href="#req.post.resource.render">req.post.resource.render</a></td>
<td><a href="#pre.filter.req.post.resource.render">Yes</a></td>
<td>No</td>
<td>Called when a POST request is to be rendered</td>
</tr>
<tr>
<td><a href="#req.delete.resource.render">req.delete.resource.render</a></td>
<td><a href="#pre.filter.req.delete.resource.render">Yes</a></td>
<td>No</td>
<td>Called when a DELETE request is to be rendered</td>
</tr>
<tr>
<td><a href="#req.get.subresource.render">req.get.subresource.render</a></td>
<td><a href="#pre.filter.req.get.subresource.render">Yes</a></td>
<td>No</td>
<td>Called when a GET request for a single sub-resource is to be rendered</td>
</tr>
<tr>
<td><a href="#req.get.subresources.render">req.get.subresources.render</a></td>
<td><a href="#pre.filter.req.get.subresources.render">Yes</a></td>
<td>No</td>
<td>Called when a GET request for a list of sub-resources is to be rendered</td>
</tr>
<tr>
<td><a href="#req.put.subresource.render">req.put.subresource.render</a></td>
<td><a href="#pre.filter.req.put.subresource.render">Yes</a></td>
<td>No</td>
<td>Called when a PUT request for a single sub-resource is to be rendered</td>
</tr>
<tr>
<td><a href="#req.delete.subresource.render">req.delete.subresource.render</a></td>
<td><a href="#pre.filter.req.delete.subresource.render">Yes</a></td>
<td>No</td>
<td>Called when a DELETE request on a sub-resource is to be rendered</td>
</tr>
<tr>
<td><a href="#req.render.json">req.render.json</a></td>
<td><a href="#pre.filter.req.render.json">Yes</a></td>
<td>No</td>
<td>NOT CALLED INTERNALLY. The event exists to allow users the ability to easily render arbitrary JSON.</td>
</tr>
<tr>
<td><a href="#req.exception">req.exception</a></td>
<td><a href="#pre.filter.req.exception">Yes</a></td>
<td>No</td>
<td>Error handler called when an Exception is thrown</td>
</tr>
<tr>
<td>Model Events</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="#model.instance">model.instance</a></td>
<td><a href="#pre.filter.model.instance">Yes</a></td>
<td><a href="#post.filter.model.instance">Yes</a></td>
<td>Called when an instance of the model representing the resource(s) is requested. By default this is your controller class name minus the 'Controller'</td>
</tr>
<tr>
<td><a href="#model.attach.behaviors">model.attach.behaviors</a></td>
<td><a href="#pre.filter.model.attach.behaviors">Yes</a></td>
<td><a href="#post.filter.model.attach.behaviors">Yes</a></td>
<td>Attaches helper behaviors to model. Called on all requests (Other then custom) to add some magic to your models.</td>
</tr>
<tr>
<td><a href="#model.with.relations">model.with.relations</a></td>
<td><a href="#pre.filter.model.with.relations">Yes</a></td>
<td><a href="#post.filter.model.with.relations">Yes</a></td>
<td>Called when trying to determine which relations to include in a requests render. The default is all relations not starting with an underscore. You should most likely customize this per resource controller as some resources may have relations that return large number of records</td>
</tr>
<tr>
<td><a href="#model.lazy.load.relations">model.lazy.load.relations</a></td>
<td><a href="#pre.filter.model.lazy.load.relations">Yes</a></td>
<td><a href="#post.filter.model.lazy.load.relations">Yes</a></td>
<td>Called when determining if relations should be lazy or eager loaded. The default is to lazy load. In most cases this is sufficient. Under certain conditions eager loading my be more appropriate</td>
</tr>
<tr>
<td><a href="#model.limit">model.limit</a></td>
<td><a href="#pre.filter.model.limit">Yes</a></td>
<td><a href="#post.filter.model.limit">Yes</a></td>
<td>Called when applying a limit to the resources returned in a GET request. The default is 100 or the value of the _GET param 'limit'</td>
</tr>
<tr>
<td><a href="#model.offset">model.offset</a></td>
<td><a href="#pre.filter.model.offset">Yes</a></td>
<td><a href="#post.filter.model.offset">Yes</a></td>
<td>Called when applying an offset to the records returned in a GET request. The default is 0 or the value of the _GET param 'offset'</td>
</tr>
<tr>
<td><a href="#model.scenario">model.scenario</a></td>
<td><a href="#pre.filter.model.scenario">Yes</a></td>
<td><a href="#post.filter.model.scenario">Yes</a></td>
<td>Called before a resource(s) is found. This is the scenario to apply to a resource pre-find. The default is 'restfullyii' or the value of the _GET param 'scenario'. At this point setting the scenario does very little, but is included here so that you may create custom functionality with little modification.</td>
</tr>
<tr>
<td><a href="#model.filter">model.filter</a></td>
<td><a href="#pre.filter.model.filter">Yes</a></td>
<td><a href="#post.filter.model.filter">Yes</a></td>
<td>Called when attempting to apply a filter to apply to the records in a GET request. The default is 'NULL' or the value of the <em>GET param 'filter'. The format is JSON: '[{"property":"SOME</em>PROPERTY", "value":"SOME_VALUE", "operator": =""}]'</td>
</tr>
<tr>
<td><a href="#model.sort">model.sort</a></td>
<td><a href="#pre.filter.model.sort">Yes</a></td>
<td><a href="#post.filter.model.sort">Yes</a></td>
<td>Called when attempting to sort records returned in a GET request. The default is 'NULL' or the value of the <em>GET param 'sort'. Rhe format is JSON:[{"property":"SOME</em>PROPERTY", "direction":"DESC"}]</td>
</tr>
<tr>
<td><a href="#model.find">model.find</a></td>
<td><a href="#pre.filter.model.find">Yes</a></td>
<td><a href="#post.filter.model.find">Yes</a></td>
<td>Called when attempting to find a single model</td>
</tr>
<tr>
<td><a href="#model.find.all">model.find.all</a></td>
<td><a href="#pre.filter.model.find.all">Yes</a></td>
<td><a href="#post.filter.model.find.all">Yes</a></td>
<td>Called when attempting to find a list of models</td>
</tr>
<tr>
<td><a href="#model.count">model.count</a></td>
<td><a href="#pre.filter.model.count">Yes</a></td>
<td><a href="#post.filter.model.count">Yes</a></td>
<td>Called when the count of model(s) is needed</td>
</tr>
<tr>
<td><a href="#model.subresource.find">model.subresource.find</a></td>
<td><a href="#pre.filter.model.subresource.find">Yes</a></td>
<td><a href="#post.filter.model.subresource.find">Yes</a></td>
<td>Called when attempting to find a subresource</td>
</tr>
<tr>
<td><a href="#model.subresource.find.all">model.subresource.find.all</a></td>
<td><a href="#pre.filter.model.subresource.find.all">Yes</a></td>
<td><a href="#post.filter.model.subresource.find.all">Yes</a></td>
<td>Called when attempting to find all subresources of a resource</td>
</tr>
<tr>
<td><a href="#model.subresource.count">model.subresource.count</a></td>
<td><a href="#pre.filter.model.subresource.count">Yes</a></td>
<td><a href="#post.filter.model.subresource.count">Yes</a></td>
<td>Called when the count of sub-resources is needed</td>
</tr>
<tr>
<td><a href="#model.apply.post.data">model.apply.post.data</a></td>
<td><a href="#pre.filter.model.apply.post.data">Yes</a></td>
<td><a href="#post.filter.model.apply.post.data">Yes</a></td>
<td>Called on POST requests when attempting to apply posted data</td>
</tr>
<tr>
<td><a href="#model.apply.put.data">model.apply.put.data</a></td>
<td><a href="#pre.filter.model.apply.put.data">Yes</a></td>
<td><a href="#post.filter.model.apply.put.data">Yes</a></td>
<td>Called on PUT requests when attempting to apply PUT data</td>
</tr>
<tr>
<td><a href="#model.save">model.save</a></td>
<td><a href="#pre.filter.model.save">Yes</a></td>
<td><a href="#post.filter.model.save">Yes</a></td>
<td>Called whenever a model resource is saved</td>
</tr>
<tr>
<td><a href="#model.subresources.save">model.subresources.save</a></td>
<td><a href="#pre.filter.model.subresources.save">Yes</a></td>
<td><a href="#post.filter.model.subresources.save">Yes</a></td>
<td>Called whenever a sub-resource is saved</td>
</tr>
<tr>
<td><a href="#model.delete">model.delete</a></td>
<td><a href="#pre.filter.model.delete">Yes</a></td>
<td><a href="#post.filter.model.delete">Yes</a></td>
<td>Called whenever a model resource needs deleting</td>
</tr>
<tr>
<td><a href="#model.subresource.delete">model.subresource.delete</a></td>
<td><a href="#pre.filter.model.subresource.delete">Yes</a></td>
<td><a href="#post.filter.model.subresource.delete">Yes</a></td>
<td>Called whenever a subresource needs deleting</td>
</tr>
<tr>
<td><a href="#model.restricted.properties">model.restricted.properties</a></td>
<td><a href="#pre.filter.model.restricted.properties">Yes</a></td>
<td><a href="#post.filter.model.restricted.properties">Yes</a></td>
<td>Called when determining which properties if any should be considered restricted. The default is [] (no restricted properties)</td>
</tr>
<tr>
<td><a href="#model.visible.properties">model.visible.properties</a></td>
<td><a href="#pre.filter.model.visible.properties">Yes</a></td>
<td><a href="#post.filter.model.visible.properties">Yes</a></td>
<td>Called when determining which properties if any should be visible. The default is [] (no hidden properties)</td>
</tr>
<tr>
<td><a href="#model.hidden.properties">model.hidden.properties</a></td>
<td><a href="#pre.filter.model.hidden.properties">Yes</a></td>
<td><a href="#post.filter.model.hidden.properties">Yes</a></td>
<td>Called when determining which properties if any should be hidden. The default is [] (no hidden properties)</td>
</tr>
</tbody>
</table><h3>
<a name="configapplicationid" class="anchor" href="#configapplicationid"><span class="octicon octicon-link"></span></a><a name="config.application.id"></a>config.application.id</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * config.application.id</span>
<span class="sd"> *</span>
<span class="sd"> * returns the app id that is applied to header vars (username, password)</span>
<span class="sd"> *</span>
<span class="sd"> * @return (String) default is 'REST'</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'config.application.id'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">'REST'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterconfigapplicationid" class="anchor" href="#prefilterconfigapplicationid"><span class="octicon octicon-link"></span></a><a name="pre.filter.config.application.id"></a>pre.filter.config.application.id</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.config.application.id'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterconfigapplicationid" class="anchor" href="#postfilterconfigapplicationid"><span class="octicon octicon-link"></span></a><a name="post.filter.config.application.id"></a>post.filter.config.application.id</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.config.application.id'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$app_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$app_id</span><span class="p">;</span> <span class="c1">//String</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="configdevflag" class="anchor" href="#configdevflag"><span class="octicon octicon-link"></span></a><a name="config.dev.flag"></a>config.dev.flag</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * config.dev.flag</span>
<span class="sd"> *</span>
<span class="sd"> * return true to set develop mode; false to turn of develop mode</span>
<span class="sd"> *</span>
<span class="sd"> * @return (bool) true by default</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'config.dev.flag'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterconfigdevflag" class="anchor" href="#prefilterconfigdevflag"><span class="octicon octicon-link"></span></a><a name="pre.filter.config.dev.flag"></a>pre.filter.config.dev.flag</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.config.dev.flag'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterconfigdevflag" class="anchor" href="#postfilterconfigdevflag"><span class="octicon octicon-link"></span></a><a name="post.filter.config.dev.flag"></a>post.filter.config.dev.flag</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.config.dev.flag'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$flag</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$flag</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqeventlogger" class="anchor" href="#reqeventlogger"><span class="octicon octicon-link"></span></a><a name="req.event.logger"></a>req.event.logger</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd">* req.event.logger</span>
<span class="sd">*</span>
<span class="sd">* @param (String) (event) the event to log</span>
<span class="sd">* @param (String) (category) the log category</span>
<span class="sd">* @param (Array) (ignore) Events to ignore logging</span>
<span class="sd">*</span>
<span class="sd">* @return (Array) the params sent into the event</span>
<span class="sd">*/</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.event.logger'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$event</span><span class="p">,</span> <span class="nv">$category</span><span class="o">=</span><span class="s1">'application'</span><span class="p">,</span><span class="nv">$ignore</span><span class="o">=</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$ignore</span><span class="p">[</span><span class="nv">$event</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nx">Yii</span><span class="o">::</span><span class="na">trace</span><span class="p">(</span><span class="nv">$event</span><span class="p">,</span> <span class="nv">$category</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$event</span><span class="p">,</span> <span class="nv">$category</span><span class="p">,</span> <span class="nv">$ignore</span><span class="p">];</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqdisablecweblogroute" class="anchor" href="#reqdisablecweblogroute"><span class="octicon octicon-link"></span></a><a name="req.disable.cweblogroute"></a>req.disable.cweblogroute</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.disable.cweblogroute</span>
<span class="sd"> *</span>
<span class="sd"> * this is only relevant if you have enabled CWebLogRoute in your main config</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Bool) true (default) to disable CWebLogRoute, false to allow</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.username'</span><span class="p">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqdisablecweblogroute" class="anchor" href="#prefilterreqdisablecweblogroute"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.disable.cweblogroute"></a>pre.filter.req.disable.cweblogroute</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.disable.cweblogroute'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqdisablecweblogroute" class="anchor" href="#postfilterreqdisablecweblogroute"><span class="octicon octicon-link"></span></a><a name="post.filter.req.disable.cweblogroute"></a>post.filter.req.disable.cweblogroute</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.disable.cweblogroute'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$disable</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$disable</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthhttpsonly" class="anchor" href="#reqauthhttpsonly"><span class="octicon octicon-link"></span></a><a name="req.auth.https.only"></a>req.auth.https.only</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.https.only</span>
<span class="sd"> *</span>
<span class="sd"> * return true to restrict to https;</span>
<span class="sd"> * false to allow http or https</span>
<span class="sd"> *</span>
<span class="sd"> * @return (bool) default is false</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.https.only'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthhttpsonly" class="anchor" href="#prefilterreqauthhttpsonly"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.https.only"></a>pre.filter.req.auth.https.only</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.https.only'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthhttpsonly" class="anchor" href="#postfilterreqauthhttpsonly"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.https.only"></a>post.filter.req.auth.https.only</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.https.only'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$https_only</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$https_only</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthusername" class="anchor" href="#reqauthusername"><span class="octicon octicon-link"></span></a><a name="req.auth.username"></a>req.auth.username</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.username</span>
<span class="sd"> *</span>
<span class="sd"> * This is the username used to grant access to non-ajax users</span>
<span class="sd"> * At a minimum you should change this value</span>
<span class="sd"> *</span>
<span class="sd"> * @return (String) the username</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.username'</span><span class="p">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="s1">'admin@restuser'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthusername" class="anchor" href="#prefilterreqauthusername"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.username"></a>pre.filter.req.auth.username</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.username'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthusername" class="anchor" href="#postfilterreqauthusername"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.username"></a>post.filter.req.auth.username</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.username'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$username</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$username</span><span class="p">;</span> <span class="c1">//String</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthpassword" class="anchor" href="#reqauthpassword"><span class="octicon octicon-link"></span></a><a name="req.auth.password"></a>req.auth.password</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.password</span>
<span class="sd"> *</span>
<span class="sd"> * This is the password use to grant access to non-ajax users</span>
<span class="sd"> * At a minimum you should change this value</span>
<span class="sd"> *</span>
<span class="sd"> * @return (String) the password</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.password'</span><span class="p">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="s1">'admin@Access'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthpassword" class="anchor" href="#prefilterreqauthpassword"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.password"></a>pre.filter.req.auth.password</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.password'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthpassword" class="anchor" href="#postfilterreqauthpassword"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.password"></a>post.filter.req.auth.password</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.password'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$password</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$password</span><span class="p">;</span> <span class="c1">//String</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthuser" class="anchor" href="#reqauthuser"><span class="octicon octicon-link"></span></a><a name="req.auth.user"></a>req.auth.user</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.user</span>
<span class="sd"> *</span>
<span class="sd"> * Used to validate a non-ajax user</span>
<span class="sd"> *</span>
<span class="sd"> * @param (String) (application_id) the application_id defined in config.application.id</span>
<span class="sd"> * @param (String) (username) the username defined in req.auth.username</span>
<span class="sd"> * @param (String) (password) the password defined in req.auth.password</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Bool) true to grant access; false to deny access</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$application_id</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_USERNAME'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_PASSWORD'</span><span class="p">]))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span> <span class="nv">$username</span> <span class="o">!=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_USERNAME'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span> <span class="nv">$password</span> <span class="o">!=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_PASSWORD'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthuser" class="anchor" href="#prefilterreqauthuser"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.user"></a>pre.filter.req.auth.user</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$application_id</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$application_id</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">];</span> <span class="c1">//Array [String, String, String]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthuser" class="anchor" href="#postfilterreqauthuser"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.user"></a>post.filter.req.auth.user</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$validation</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthajaxuser" class="anchor" href="#reqauthajaxuser"><span class="octicon octicon-link"></span></a><a name="req.auth.ajax.user"></a>req.auth.ajax.user</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.ajax.user</span>
<span class="sd"> *</span>
<span class="sd"> * Used to validate an ajax user</span>
<span class="sd"> * That is requests originating from JavaScript</span>
<span class="sd"> * By default all logged-in users will be granted access</span>
<span class="sd"> * everyone else will be denied</span>
<span class="sd"> * You should most likely over ride this</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Bool) return true to grant access; false to deny access</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.ajax.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="o">-&gt;</span><span class="na">isGuest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthajaxuser" class="anchor" href="#prefilterreqauthajaxuser"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.ajax.user"></a>pre.filter.req.auth.ajax.user</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.ajax.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//no return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthajaxuser" class="anchor" href="#postfilterreqauthajaxuser"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.ajax.user"></a>post.filter.req.auth.ajax.user</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.auth.ajax.user'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$validation</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthtype" class="anchor" href="#reqauthtype"><span class="octicon octicon-link"></span></a><a name="req.auth.type"></a>req.auth.type</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.type</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Int) The request authentication type which may be 'USERPASS' (2), 'AJAX' (3) or 'CORS' (1)</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.type'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$application_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_CORS'</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'OPTIONS'</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ERestEventListenerRegistry</span><span class="o">::</span><span class="na">REQ_TYPE_CORS</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_USERNAME'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_X_'</span><span class="o">.</span><span class="nv">$application_id</span><span class="o">.</span><span class="s1">'_PASSWORD'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ERestEventListenerRegistry</span><span class="o">::</span><span class="na">REQ_TYPE_USERPASS</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ERestEventListenerRegistry</span><span class="o">::</span><span class="na">REQ_TYPE_AJAX</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthtype" class="anchor" href="#prefilterreqauthtype"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.type"></a>pre.filter.req.auth.type</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.type'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$application_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$application_id</span><span class="p">;</span> <span class="c1">//String</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthtype" class="anchor" href="#postfilterreqauthtype"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.type"></a>post.filter.req.auth.type</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.config.application.id'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$auth_type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$auth_type</span><span class="p">;</span> <span class="c1">//Int</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqcorsaccesscontrolalloworigin" class="anchor" href="#reqcorsaccesscontrolalloworigin"><span class="octicon octicon-link"></span></a><a name="req.cors.access.control.allow.origin"></a>req.cors.access.control.allow.origin</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.cors.access.control.allow.origin</span>
<span class="sd"> *</span>
<span class="sd"> * Used to validate a CORS request</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) return a list of domains (origin) allowed access</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.allow.origin'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqcorsaccesscontrolalloworigin" class="anchor" href="#prefilterreqcorsaccesscontrolalloworigin"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.cors.access.control.allow.origin"></a>pre.filter.req.cors.access.control.allow.origin</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.cors.access.control.allow.origin'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No Return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqcorsaccesscontrolalloworigin" class="anchor" href="#postfilterreqcorsaccesscontrolalloworigin"><span class="octicon octicon-link"></span></a><a name="post.filter.req.cors.access.control.allow.origin"></a>post.filter.req.cors.access.control.allow.origin</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.cors.access.control.allow.origin'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$allowed_origins</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$allowed_origins</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqcorsaccesscontrolallowmethods" class="anchor" href="#reqcorsaccesscontrolallowmethods"><span class="octicon octicon-link"></span></a><a name="req.cors.access.control.allow.methods"></a>req.cors.access.control.allow.methods</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.cors.access.control.allow.methods</span>
<span class="sd"> *</span>
<span class="sd"> * Used by CORS request to indicate the http methods (verbs) </span>
<span class="sd"> * that can be used in the actual request</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) List of http methods allowed via CORS</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.allow.methods'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'POST'</span><span class="p">];</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqcorsaccesscontrolallowmethods" class="anchor" href="#prefilterreqcorsaccesscontrolallowmethods"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.cors.access.control.allow.methods"></a>pre.filter.req.cors.access.control.allow.methods</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.cors.access.control.allow.methods'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No Return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqcorsaccesscontrolallowmethods" class="anchor" href="#postfilterreqcorsaccesscontrolallowmethods"><span class="octicon octicon-link"></span></a><a name="post.filter.req.cors.access.control.allow.methods"></a>post.filter.req.cors.access.control.allow.methods</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.cors.access.control.allow.methods'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$allowed_methods</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$allowed_methods</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqcorsaccesscontrolallowheaders" class="anchor" href="#reqcorsaccesscontrolallowheaders"><span class="octicon octicon-link"></span></a><a name="req.cors.access.control.allow.headers"></a>req.cors.access.control.allow.headers</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.cors.access.control.allow.headers</span>
<span class="sd"> *</span>
<span class="sd"> * Used by CORS request to indicate which custom headers are allowed in a request</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) List of allowed headers</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.allow.headers'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$application_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">"X_</span><span class="si">{</span><span class="nv">$application_id</span><span class="si">}</span><span class="s2">_CORS"</span><span class="p">];</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqcorsaccesscontrolallowheaders" class="anchor" href="#prefilterreqcorsaccesscontrolallowheaders"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.cors.access.control.allow.headers"></a>pre.filter.req.cors.access.control.allow.headers</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.cors.access.control.allow.headers'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No Return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqcorsaccesscontrolallowheaders" class="anchor" href="#postfilterreqcorsaccesscontrolallowheaders"><span class="octicon octicon-link"></span></a><a name="post.filter.req.cors.access.control.allow.headers"></a>post.filter.req.cors.access.control.allow.headers</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.cors.access.control.allow.headers'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$allowed_headers</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$allowed_headers</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqcorsaccesscontrolmaxage" class="anchor" href="#reqcorsaccesscontrolmaxage"><span class="octicon octicon-link"></span></a><a name="req.cors.access.control.max.age"></a>req.cors.access.control.max.age</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.cors.access.control.max.age</span>
<span class="sd"> *</span>
<span class="sd"> * Used in a CORS request to indicate how long the response can be cached, </span>
<span class="sd"> * so that for subsequent requests, within the specified time, no preflight request has to be made</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Int) time in seconds</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.cors.access.control.max.age'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">3628800</span><span class="p">;</span> <span class="c1">//Int</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqcorsaccesscontrolmaxage" class="anchor" href="#prefilterreqcorsaccesscontrolmaxage"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.cors.access.control.max.age"></a>pre.filter.req.cors.access.control.max.age</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.cors.access.control.max.age'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No Return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqcorsaccesscontrolmaxage" class="anchor" href="#postfilterreqcorsaccesscontrolmaxage"><span class="octicon octicon-link"></span></a><a name="post.filter.req.cors.access.control.allow.headers"></a>post.filter.req.cors.access.control.max.age</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.cors.access.control.max.age'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$max_age_in_seconds</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$max_age_in_seconds</span><span class="p">;</span> <span class="c1">//int</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthcors" class="anchor" href="#reqauthcors"><span class="octicon octicon-link"></span></a><a name="req.auth.cors"></a>req.auth.cors</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.cors</span>
<span class="sd"> *</span>
<span class="sd"> * Used to authorize a given CORS request</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Array) (allowed_origins) list of allowed remote origins</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Bool) true to allow access and false to deny access</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.auth.cors'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$allowed_origins</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">((</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_ORIGIN'</span><span class="p">]))</span> <span class="o">&amp;&amp;</span> <span class="p">((</span> <span class="nb">array_search</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_ORIGIN'</span><span class="p">],</span> <span class="nv">$allowed_origins</span><span class="p">))</span> <span class="o">!==</span> <span class="k">false</span> <span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>   
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthcors" class="anchor" href="#prefilterreqauthcors"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.cors"></a>pre.filter.req.auth.cors</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.cors'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$allowed_origins</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$allowed_origins</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthcors" class="anchor" href="#postfilterreqauthcors"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.cors"></a>post.filter.req.auth.cors</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.config.application.id'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$auth_cors</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$auth_cors</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqauthuri" class="anchor" href="#reqauthuri"><span class="octicon octicon-link"></span></a><a name="req.auth.uri"></a>req.auth.uri</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.auth.uri</span>
<span class="sd"> *</span>
<span class="sd"> * return true to allow access to a given uri / http verb;</span>
<span class="sd"> * false to deny access to a given uri / http verb;</span>
<span class="sd"> *</span>
<span class="sd"> * @return (bool) default is true</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="nx">req</span><span class="o">.</span><span class="nx">auth</span><span class="o">.</span><span class="nx">uri</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$uri</span><span class="p">,</span> <span class="nv">$verb</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqauthuri" class="anchor" href="#prefilterreqauthuri"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.auth.uri"></a>pre.filter.req.auth.uri</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.auth.uri'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$uri</span><span class="p">,</span> <span class="nv">$verb</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$uri</span><span class="p">,</span> <span class="nv">$verb</span><span class="p">];</span> <span class="c1">//array[string, string]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqauthuri" class="anchor" href="#postfilterreqauthuri"><span class="octicon octicon-link"></span></a><a name="post.filter.req.auth.uri"></a>post.filter.req.auth.uri</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="err">'</span><span class="nx">post</span><span class="o">.</span><span class="nx">filter</span><span class="o">.</span><span class="nx">req</span><span class="o">.</span><span class="nx">auth</span><span class="o">.</span><span class="nx">uri</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$validation</span><span class="p">;</span> <span class="c1">//bool</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="reqafteraction" class="anchor" href="#reqafteraction"><span class="octicon octicon-link"></span></a><a name="req.after.action"></a>req.after.action</h4>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.after.action</span>
<span class="sd"> *</span>
<span class="sd"> * Called after the request has been fulfilled</span>
<span class="sd"> * By default it has no behavior</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.after.action'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$filterChain</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Logic being applied after the action is executed</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqafteraction" class="anchor" href="#prefilterreqafteraction"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.after.action"></a>pre.filter.req.after.action</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.after.action'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$filterChain</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$filterChain</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqafteraction" class="anchor" href="#postfilterreqafteraction"><span class="octicon octicon-link"></span></a><a name="post.filter.req.after.action"></a>post.filter.req.after.action</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.after.action'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="o">=</span><span class="k">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Mixed</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqparamispk" class="anchor" href="#reqparamispk"><span class="octicon octicon-link"></span></a><a name="req.param.is.pk"></a>req.param.is.pk</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.param.is.pk</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to validate a resources primary key</span>
<span class="sd"> * The default is an integer</span>
<span class="sd"> *</span>
<span class="sd"> * @return (bool) true to confirm primary key; false to deny</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.param.is.pk'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$pk</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$pk</span> <span class="o">===</span> <span class="s1">'0'</span> <span class="o">||</span> <span class="nb">preg_match</span><span class="p">(</span><span class="s1">'/^-?[1-9][0-9]*$/'</span><span class="p">,</span> <span class="nv">$pk</span><span class="p">)</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqparamispk" class="anchor" href="#prefilterreqparamispk"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.param.is.pk"></a>pre.filter.req.param.is.pk</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.param.is.pk'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$pk</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$pk</span><span class="p">;</span> <span class="c1">//Mixed</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqparamispk" class="anchor" href="#postfilterreqparamispk"><span class="octicon octicon-link"></span></a><a name="post.filter.req.param.is.pk"></a>post.filter.req.param.is.pk</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.param.is.pk'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$isPk</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$isPk</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqdataread" class="anchor" href="#reqdataread"><span class="octicon octicon-link"></span></a><a name="req.data.read"></a>req.data.read</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.data.read</span>
<span class="sd"> *</span>
<span class="sd"> * Called when reading data on POST &amp; PUT requests</span>
<span class="sd"> *</span>
<span class="sd"> * @param (String) this can be either a stream wrapper of a file path</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) the JSON decoded array of data</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.data.read'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$stream</span><span class="o">=</span><span class="s1">'php://input'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ERestRequestReader</span><span class="p">(</span><span class="nv">$stream</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">CJSON</span><span class="o">::</span><span class="na">decode</span><span class="p">(</span><span class="nv">$reader</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqdataread" class="anchor" href="#prefilterreqdataread"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.data.read"></a>pre.filter.req.data.read</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.data.read, function($stream='</span><span class="nx">php</span><span class="o">://</span><span class="nx">input</span><span class="err">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$stream</span><span class="p">;</span> <span class="c1">//Mixed</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfilterreqdataread" class="anchor" href="#postfilterreqdataread"><span class="octicon octicon-link"></span></a><a name="post.filter.req.data.read"></a>post.filter.req.data.read</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.req.data.read'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$data</span><span class="p">];</span> <span class="c1">//Array [Array]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqgetresourcerender" class="anchor" href="#reqgetresourcerender"><span class="octicon octicon-link"></span></a><a name="req.get.resource.render"></a>req.get.resource.render</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.get.resource.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when a GET request for a single resource is to be rendered</span>
<span class="sd"> * @param (Object) (data) this is the resources model</span>
<span class="sd"> * @param (String) (model_name) the name of the resources model</span>
<span class="sd"> * @param (Array) (relations) the list of relations to include with the data</span>
<span class="sd"> * @param (Int) (count) the count of records to return (will be either 1 or 0)</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.get.resource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$model_name</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Handler for GET (single resource) request</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setHttpStatus</span><span class="p">(((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="mi">200</span><span class="o">:</span> <span class="mi">204</span><span class="p">));</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="k">true</span><span class="o">:</span> <span class="k">false</span><span class="p">),</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="s2">"Record Found"</span><span class="o">:</span> <span class="s2">"No Record Found"</span><span class="p">),</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="nv">$count</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nv">$model_name</span><span class="p">,</span>
        <span class="s1">'relations'</span>         <span class="o">=&gt;</span> <span class="nv">$relations</span><span class="p">,</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$data</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqgetresourcerender" class="anchor" href="#prefilterreqgetresourcerender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.get.resource.render"></a>pre.filter.req.get.resource.render</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="err">'</span><span class="nx">pre</span><span class="o">.</span><span class="nx">filter</span><span class="o">.</span><span class="nx">req</span><span class="o">.</span><span class="nx">get</span><span class="o">.</span><span class="nx">resource</span><span class="o">.</span><span class="nx">render</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$model_name</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$model_name</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">,</span> <span class="nv">$count</span><span class="p">];</span> <span class="c1">//Array [Object, String, Array, Int]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="reqgetresourcesrender" class="anchor" href="#reqgetresourcesrender"><span class="octicon octicon-link"></span></a><a name="req.get.resources.render"></a>req.get.resources.render</h4>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.get.resources.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when a GET request for when a list resources is to be rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Array) (data) this is an array of models representing the resources</span>
<span class="sd"> * @param (String) (model_name) the name of the resources model</span>
<span class="sd"> * @param (Array) (relations) the list of relations to include with the data</span>
<span class="sd"> * @param (Int) (count) the count of records to return</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.get.resources.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$model_name</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Handler for GET (list resources) request</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setHttpStatus</span><span class="p">(((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="mi">200</span><span class="o">:</span> <span class="mi">204</span><span class="p">));</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="k">true</span><span class="o">:</span> <span class="k">false</span><span class="p">),</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="s2">"Record(s) Found"</span><span class="o">:</span> <span class="s2">"No Record(s) Found"</span><span class="p">),</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="nv">$count</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nv">$model_name</span><span class="p">,</span>
        <span class="s1">'relations'</span>         <span class="o">=&gt;</span> <span class="nv">$relations</span><span class="p">,</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$data</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqgetresourcesrender" class="anchor" href="#prefilterreqgetresourcesrender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.get.resources.render"></a>pre.filter.req.get.resources.render</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="err">'</span><span class="nx">pre</span><span class="o">.</span><span class="nx">filter</span><span class="o">.</span><span class="nx">req</span><span class="o">.</span><span class="nx">get</span><span class="o">.</span><span class="nx">resources</span><span class="o">.</span><span class="nx">render</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$model_name</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$model_name</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">,</span> <span class="nv">$count</span><span class="p">];</span> <span class="c1">//Array [Array [Object], String, Array, Int]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqputresourcerender" class="anchor" href="#reqputresourcerender"><span class="octicon octicon-link"></span></a><a name="req.put.resource.render"></a>req.put.resource.render</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.put.resource.render</span>
<span class="sd"> * </span>
<span class="sd"> * Called when a PUT request (update) is to be rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the updated model</span>
<span class="sd"> * @param (Array) (relations) list of relations to render with model</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.put.resource.render'</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="s2">"Record Updated"</span><span class="p">,</span>
        <span class="s1">'totalCount'</span>    <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="s1">'modelName'</span>     <span class="o">=&gt;</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$model</span><span class="p">),</span>
        <span class="s1">'relations'</span>     <span class="o">=&gt;</span> <span class="nv">$relations</span><span class="p">,</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$model</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqputresourcerender" class="anchor" href="#prefilterreqputresourcerender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.put.resource.render"></a>pre.filter.req.put.resource.render</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="err">'</span><span class="nx">pre</span><span class="o">.</span><span class="nx">filter</span><span class="o">.</span><span class="nx">req</span><span class="o">.</span><span class="nx">req</span><span class="o">.</span><span class="nx">put</span><span class="o">.</span><span class="nx">resource</span><span class="o">.</span><span class="nx">render</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nx">relations</span><span class="p">];</span> <span class="c1">//Array [Object, Array]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqpostresourcerender" class="anchor" href="#reqpostresourcerender"><span class="octicon octicon-link"></span></a><a name="req.post.resource.render"></a>req.post.resource.render</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.post.resource.render</span>
<span class="sd"> * </span>
<span class="sd"> * Called when a POST request (create) is to be rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the newly created model</span>
<span class="sd"> * @param (Array) (relations) list of relations to render with model</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.post.resource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$relations</span><span class="o">=</span><span class="p">[])</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="s2">"Record Created"</span><span class="p">,</span>
        <span class="s1">'totalCount'</span>    <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="s1">'modelName'</span>     <span class="o">=&gt;</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$model</span><span class="p">),</span>
        <span class="s1">'relations'</span>     <span class="o">=&gt;</span> <span class="nv">$relations</span><span class="p">,</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$model</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqpostresourcerender" class="anchor" href="#prefilterreqpostresourcerender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.post.resource.render"></a>pre.filter.req.post.resource.render</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.post.resource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$relations</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nx">relations</span><span class="p">];</span> <span class="c1">//Array [Object, Array]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqdeleteresourcerender" class="anchor" href="#reqdeleteresourcerender"><span class="octicon octicon-link"></span></a><a name="req.delete.resource.render"></a>req.delete.resource.render</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.delete.resource.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when DELETE request is to be rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) this is the deleted model object for the resource</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.delete.resource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="s2">"Record Deleted"</span><span class="p">,</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$model</span><span class="p">),</span>
        <span class="s1">'relations'</span>         <span class="o">=&gt;</span> <span class="p">[],</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$model</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="reqdeleteresourcerender-1" class="anchor" href="#reqdeleteresourcerender-1"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.delete.resource.render"></a>req.delete.resource.render</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.delete.resource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqgetsubresourcerender" class="anchor" href="#reqgetsubresourcerender"><span class="octicon octicon-link"></span></a><a name="req.get.subresource.render">req.get.subresource.render</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.get.subresource.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when a GET request for a sub-resource is to be rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model representing the sub-resource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the sub-resource to render</span>
<span class="sd"> * @param (Int) (count) the count of sub-resources to render (will be either 1 or 0)</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.get.subresource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setHttpStatus</span><span class="p">(((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="mi">200</span><span class="o">:</span> <span class="mi">204</span><span class="p">));</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="s2">"Record(s) Found"</span><span class="o">:</span> <span class="s2">"No Record(s) Found"</span><span class="p">),</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="nv">$count</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nv">$subresource_name</span><span class="p">,</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$model</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqgetsubresourcerender" class="anchor" href="#prefilterreqgetsubresourcerender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.get.subresource.render">pre.filter.req.get.subresource.render</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.get.subresource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$count</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqgetsubresourcesrender" class="anchor" href="#reqgetsubresourcesrender"><span class="octicon octicon-link"></span></a><a name="req.get.subresources.render">req.get.subresources.render</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.get.subresources.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when a GET request for a list of sub-resources is to be rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Array) (models) list of sub-resource models</span>
<span class="sd"> * @param (String) (subresource_name) the name of the sub-resources to render</span>
<span class="sd"> * @param (Int) (count) the count of sub-resources to render</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.get.subresources.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$models</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setHttpStatus</span><span class="p">(((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="mi">200</span><span class="o">:</span> <span class="mi">204</span><span class="p">));</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="k">true</span><span class="o">:</span> <span class="k">false</span><span class="p">),</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="p">((</span><span class="nv">$count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span> <span class="s2">"Record(s) Found"</span><span class="o">:</span> <span class="s2">"No Record(s) Found"</span><span class="p">),</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="nv">$count</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nv">$subresource_name</span><span class="p">,</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$models</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqgetsubresourcesrender" class="anchor" href="#prefilterreqgetsubresourcesrender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.get.subresources.render">pre.filter.req.get.subresources.render</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.get.subresources.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$models</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$models</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$count</span><span class="p">];</span> <span class="c1">//Array [Array[Object], String, Int]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqputsubresourcerender" class="anchor" href="#reqputsubresourcerender"><span class="octicon octicon-link"></span></a><a name="req.put.subresource.render">req.put.subresource.render</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.put.subresource.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when a PUT request to a sub-resource (add a sub-resource) is rendered</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model of the resource that owns the subresource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the sub-resource</span>
<span class="sd"> * @param (Mixed/Int) (subresource_id) the primary key of the sub-resource</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.put.subresource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="s2">"Subresource Added"</span><span class="p">,</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$model</span><span class="p">),</span>
        <span class="s1">'relations'</span>         <span class="o">=&gt;</span> <span class="p">[</span><span class="nv">$subresource_name</span><span class="p">],</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$model</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqputsubresourcerender" class="anchor" href="#prefilterreqputsubresourcerender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.put.subresource.render">pre.filter.req.put.subresource.render</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.put.subresource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqdeletesubresourcerender" class="anchor" href="#reqdeletesubresourcerender"><span class="octicon octicon-link"></span></a><a name="req.delete.subresource.render">req.delete.subresource.render</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.delete.subresource.render</span>
<span class="sd"> *</span>
<span class="sd"> * Called when DELETE request on a sub-resource is to be made</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) this is the model object that owns the deleted sub-resource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the deleted sub-resource</span>
<span class="sd"> * @param (Mixed/Int) (subresource_id) the primary key of the deleted sub-resource</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.delete.subresource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>              <span class="o">=&gt;</span> <span class="s1">'rest'</span><span class="p">,</span>
        <span class="s1">'success'</span>           <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
        <span class="s1">'message'</span>           <span class="o">=&gt;</span> <span class="s2">"Sub-Resource Deleted"</span><span class="p">,</span>
        <span class="s1">'totalCount'</span>        <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="s1">'modelName'</span>         <span class="o">=&gt;</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$model</span><span class="p">),</span>
        <span class="s1">'relations'</span>         <span class="o">=&gt;</span> <span class="p">[</span><span class="nv">$subresource_name</span><span class="p">],</span>
        <span class="s1">'data'</span>              <span class="o">=&gt;</span> <span class="nv">$model</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqdeletesubresourcerender" class="anchor" href="#prefilterreqdeletesubresourcerender"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.delete.subresource.render">pre.filter.req.delete.subresource.render</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.delete.subresource.render'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqrenderjson" class="anchor" href="#reqrenderjson"><span class="octicon octicon-link"></span></a><a name="req.render.json">req.render.json</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.render.json</span>
<span class="sd"> * NOT CALLED internally</span>
<span class="sd"> * The handler exists to allow users the ability to easily render arbitrary JSON</span>
<span class="sd"> * To do so you must 'emitRest' this event</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Array) (data) data to be rendered</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.render.json'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'raw'</span><span class="p">,</span>
        <span class="s1">'data'</span> <span class="o">=&gt;</span> <span class="nv">$data</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqrenderjson" class="anchor" href="#prefilterreqrenderjson"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.render.json">pre.filter.req.render.json</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.render.json'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$data</span><span class="p">];</span> <span class="c1">//Array[Array]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="reqexception" class="anchor" href="#reqexception"><span class="octicon octicon-link"></span></a><a name="req.exception">req.exception</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * req.exception</span>
<span class="sd"> *</span>
<span class="sd"> * Error handler called when an Exception is thrown</span>
<span class="sd"> * Used to render response to the client</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Int) (errorCode) the http status code</span>
<span class="sd"> * @param (String) the error message</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'req.exception'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$errorCode</span><span class="p">,</span> <span class="nv">$message</span><span class="o">=</span><span class="k">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderJSON</span><span class="p">([</span>
        <span class="s1">'type'</span>          <span class="o">=&gt;</span> <span class="s1">'error'</span><span class="p">,</span>
        <span class="s1">'success'</span>       <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
        <span class="s1">'message'</span>       <span class="o">=&gt;</span> <span class="p">(</span><span class="nb">is_null</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span><span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getHttpStatus</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">message</span><span class="o">:</span> <span class="nv">$message</span><span class="p">),</span>
        <span class="s1">'errorCode'</span> <span class="o">=&gt;</span> <span class="nv">$errorCode</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefilterreqexception" class="anchor" href="#prefilterreqexception"><span class="octicon octicon-link"></span></a><a name="pre.filter.req.exception">pre.filter.req.exception</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.req.exception'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$errorCode</span><span class="p">,</span> <span class="nv">$message</span><span class="o">=</span><span class="k">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$errorCode</span><span class="p">,</span> <span class="nv">$message</span><span class="o">=</span><span class="k">null</span><span class="p">];</span> <span class="c1">//Array [Int, String]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelinstance" class="anchor" href="#modelinstance"><span class="octicon octicon-link"></span></a><a name="model.instance">model.instance</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.instance</span>
<span class="sd"> *</span>
<span class="sd"> * Called when an instance of the model representing the resource(s) is requested</span>
<span class="sd"> * By default this is your controller class name minus the 'Controller'</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) an empty instance of a resources Active Record model</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.instance'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$modelName</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">'Controller'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nv">$modelName</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelinstance" class="anchor" href="#prefiltermodelinstance"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.instance">pre.filter.model.instance</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.instance'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelinstance" class="anchor" href="#postfiltermodelinstance"><span class="octicon octicon-link"></span></a><a name="post.filter.model.instance">post.filter.model.instance</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.instance'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelattachbehaviors" class="anchor" href="#modelattachbehaviors"><span class="octicon octicon-link"></span></a><a name="model.attach.behaviors">model.attach.behaviors</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.attach.behaviors</span>
<span class="sd"> *</span>
<span class="sd"> * Called on all requests (Other then custom) to add some magic to your models</span>
<span class="sd"> * Attach helper behaviors to model</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) an instance of an AR Model</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) an instance of an Active Record model</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.attach.behaviors'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Attach this behavior to help saving nested models</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="s1">'ERestActiveRecordRelationBehavior'</span><span class="p">,</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">behaviors</span><span class="p">()))</span> <span class="p">{</span>
        <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">attachBehavior</span><span class="p">(</span><span class="s1">'ERestActiveRecordRelationBehavior'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">ERestActiveRecordRelationBehavior</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="s1">'ERestHelperScopes'</span><span class="p">,</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">behaviors</span><span class="p">()))</span> <span class="p">{</span>
        <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">attachBehavior</span><span class="p">(</span><span class="s1">'ERestHelperScopes'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">ERestHelperScopes</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelattachbehaviors" class="anchor" href="#prefiltermodelattachbehaviors"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.attach.behaviors">pre.filter.model.attach.behaviors</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.attach.behaviors'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelattachbehaviors" class="anchor" href="#postfiltermodelattachbehaviors"><span class="octicon octicon-link"></span></a><a name="post.filter.model.attach.behaviors">post.filter.model.attach.behaviors</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.attach.behaviors'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelwithrelations" class="anchor" href="#modelwithrelations"><span class="octicon octicon-link"></span></a><a name="model.with.relations">model.with.relations</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.with.relations</span>
<span class="sd"> *</span>
<span class="sd"> * Called when trying to determine which relations to include in a requests render</span>
<span class="sd"> * The default is all relations not starting with an underscore</span>
<span class="sd"> * You should most likely customize this per resource</span>
<span class="sd"> * as some resources may have relations that return large number of records</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) list of relations (Strings) to attach to resources output</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.with.relations'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$nestedRelations</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">metadata</span><span class="o">-&gt;</span><span class="na">relations</span> <span class="k">as</span> <span class="nv">$rel</span><span class="o">=&gt;</span><span class="nv">$val</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$className</span> <span class="o">=</span> <span class="nv">$val</span><span class="o">-&gt;</span><span class="na">className</span><span class="p">;</span>
        <span class="nv">$rel_model</span> <span class="o">=</span> <span class="nb">call_user_func</span><span class="p">([</span><span class="nv">$className</span><span class="p">,</span> <span class="s1">'model'</span><span class="p">]);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$rel_model</span><span class="o">-&gt;</span><span class="na">tableSchema</span><span class="o">-&gt;</span><span class="na">primaryKey</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$rel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">'_'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$nestedRelations</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$rel</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$nestedRelations</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelwithrelations" class="anchor" href="#prefiltermodelwithrelations"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.with.relations">pre.filter.model.with.relations</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.with.relations'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelwithrelations" class="anchor" href="#postfiltermodelwithrelations"><span class="octicon octicon-link"></span></a><a name="post.filter.model.with.relations">post.filter.model.with.relations</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.with.relations'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array[String]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modellazyloadrelations" class="anchor" href="#modellazyloadrelations"><span class="octicon octicon-link"></span></a><a name="model.lazy.load.relations">model.lazy.load.relations</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.lazy.load.relations</span>
<span class="sd"> *</span>
<span class="sd"> * Called when determining if relations should be lazy or eager loaded</span>
<span class="sd"> * The default is to lazy load. In most cases this is sufficient</span>
<span class="sd"> * Under certain conditions eager loading my be more appropriate</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Bool) true to lazy load relations; false to eager load</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.lazy.load.relations'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodellazyloadrelations" class="anchor" href="#prefiltermodellazyloadrelations"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.lazy.load.relations">pre.filter.model.lazy.load.relations</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.lazy.load.relations'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodellazyloadrelations" class="anchor" href="#postfiltermodellazyloadrelations"><span class="octicon octicon-link"></span></a><a name="post.filter.model.lazy.load.relations">post.filter.model.lazy.load.relations</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.lazy.load.relations'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Bool</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modellimit" class="anchor" href="#modellimit"><span class="octicon octicon-link"></span></a><a name="model.limit">model.limit</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.limit</span>
<span class="sd"> *</span>
<span class="sd"> * Called when applying a limit to the resources returned in a GET request</span>
<span class="sd"> * The default is 100 or the value of the _GET param 'limit'</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Int) the number of results to return</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.limit'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">])</span><span class="o">?</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">]</span><span class="o">:</span> <span class="mi">100</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodellimit" class="anchor" href="#prefiltermodellimit"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.limit">pre.filter.model.limit</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.limit'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodellimit" class="anchor" href="#postfiltermodellimit"><span class="octicon octicon-link"></span></a><a name="post.filter.model.limit">post.filter.model.limit</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.limit'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Int</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modeloffset" class="anchor" href="#modeloffset"><span class="octicon octicon-link"></span></a><a name="model.offset">model.offset</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.offset</span>
<span class="sd"> *</span>
<span class="sd"> * Called when applying an offset to the records returned in a GET request</span>
<span class="sd"> * The default is 0 or the value of the _GET param 'offset'</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Int) the offset of results to return</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.offset'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'offset'</span><span class="p">])</span><span class="o">?</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'offset'</span><span class="p">]</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodeloffset" class="anchor" href="#prefiltermodeloffset"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.offset">pre.filter.model.offset</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.offset'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodeloffset" class="anchor" href="#postfiltermodeloffset"><span class="octicon octicon-link"></span></a><a name="post.filter.model.offset">post.filter.model.offset</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.offset'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Int</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelscenario" class="anchor" href="#modelscenario"><span class="octicon octicon-link"></span></a><a name="model.scenario">model.scenario</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.scenario</span>
<span class="sd"> *</span>
<span class="sd"> * Called before a resource is found</span>
<span class="sd"> * This is the scenario to apply to a resource pre-find</span>
<span class="sd"> * The default is 'restfullyii' or the value of the _GET param 'scenario'</span>
<span class="sd"> *</span>
<span class="sd"> * @return (String) the scenario name</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.scenario'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'scenario'</span><span class="p">])</span><span class="o">?</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'scenario'</span><span class="p">]</span><span class="o">:</span> <span class="s1">'restfullyii'</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelscenario" class="anchor" href="#prefiltermodelscenario"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.scenario">pre.filter.model.scenario</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.scenario'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelscenario" class="anchor" href="#postfiltermodelscenario"><span class="octicon octicon-link"></span></a><a name="post.filter.model.scenario">post.filter.model.scenario</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.scenario'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//String</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelfilter" class="anchor" href="#modelfilter"><span class="octicon octicon-link"></span></a><a name="model.filter">model.filter</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.filter</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to apply a filter to apply to the records in a GET request</span>
<span class="sd"> * The default is 'NULL' or the value of the _GET param 'filter'</span>
<span class="sd"> * The format is JSON: </span>
<span class="sd"> * '[{"property":"SOME_PROPERTY", "value":"SOME_VALUE"}]'</span>
<span class="sd"> * See documentation for additional options</span>
<span class="sd"> *</span>
<span class="sd"> * @return (JSON) the filter to apply</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.filter'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'filter'</span><span class="p">])</span><span class="o">?</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'filter'</span><span class="p">]</span><span class="o">:</span> <span class="k">null</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelfilter" class="anchor" href="#prefiltermodelfilter"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.filter">pre.filter.model.filter</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.filter'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelfilter" class="anchor" href="#postfiltermodelfilter"><span class="octicon octicon-link"></span></a><a name="post.filter.model.filter">post.filter.model.filter</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.filter'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array[Object]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsort" class="anchor" href="#modelsort"><span class="octicon octicon-link"></span></a><a name="model.sort">model.sort</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.sort</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to sort records returned in a GET request</span>
<span class="sd"> * The default is 'NULL' or the value of the _GET param 'sort'</span>
<span class="sd"> * The format is JSON:</span>
<span class="sd"> * [{"property":"SOME_PROPERTY", "direction":"DESC"}]</span>
<span class="sd"> *</span>
<span class="sd"> * @return (JSON) the sort to apply</span>
<span class="sd"> */</span> 
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.sort'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'sort'</span><span class="p">])</span><span class="o">?</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'sort'</span><span class="p">]</span><span class="o">:</span> <span class="k">null</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsort" class="anchor" href="#prefiltermodelsort"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.sort">pre.filter.model.sort</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.sort'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsort" class="anchor" href="#postfiltermodelsort"><span class="octicon octicon-link"></span></a><a name="post.filter.model.sort">post.filter.model.sort</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.sort'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array[Object]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelfind" class="anchor" href="#modelfind"><span class="octicon octicon-link"></span></a><a name="model.find">model.find</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.find</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to find a single model</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) an instance of the resources model</span>
<span class="sd"> * @param (Mixed/Int) (id) the resources primary key</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the found model</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.find'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">findByPk</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelfind" class="anchor" href="#prefiltermodelfind"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.find">pre.filter.model.find</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.find'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$id</span><span class="p">];</span> <span class="c1">//Array [Object, Int]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelfind" class="anchor" href="#postfiltermodelfind"><span class="octicon octicon-link"></span></a><a name="post.filter.model.find">post.filter.model.find</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.find'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelfindall" class="anchor" href="#modelfindall"><span class="octicon octicon-link"></span></a><a name="model.find.all">model.find.all</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.find.all</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to find a list of models</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) an instance of the resources model</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) list of found models</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.find.all'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">findAll</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelfindall" class="anchor" href="#prefiltermodelfindall"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.find.all">pre.filter.model.find.all</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.find.all'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelfindall" class="anchor" href="#postfiltermodelfindall"><span class="octicon octicon-link"></span></a><a name="post.filter.model.find.all">post.filter.model.find.all</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.find.all'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array[Object]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelcount" class="anchor" href="#modelcount"><span class="octicon octicon-link"></span></a><a name="model.count">model.count</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.count</span>
<span class="sd"> *</span>
<span class="sd"> * Called when the count of model(s) is needed</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model to apply the count to</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Int) the count of models</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.count'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">count</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelcount" class="anchor" href="#prefiltermodelcount"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.count">pre.filter.model.count</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.count'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelcount" class="anchor" href="#postfiltermodelcount"><span class="octicon octicon-link"></span></a><a name="post.filter.model.count">post.filter.model.count</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.count'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Int</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsubresourcefind" class="anchor" href="#modelsubresourcefind"><span class="octicon octicon-link"></span></a><a name="model.subresource.find">model.subresource.find</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.subresource.find</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to find a subresource</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model that represents the owner of the sub-resource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the sub-resource</span>
<span class="sd"> * @param (Mixed/Int) (subresource_id) the primary key of the sub-resource</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the sub-resource model</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.subresource.find'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$subresource</span> <span class="o">=</span> <span class="o">@</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getSubresourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getSubresource</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$subresource</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$subresource</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$subresource</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsubresourcefind" class="anchor" href="#prefiltermodelsubresourcefind"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.subresource.find">pre.filter.model.subresource.find</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.subresource.find'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsubresourcefind" class="anchor" href="#postfiltermodelsubresourcefind"><span class="octicon octicon-link"></span></a><a name="post.filter.model.subresource.find">post.filter.model.subresource.find</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.subresource.find'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsubresourcefindall" class="anchor" href="#modelsubresourcefindall"><span class="octicon octicon-link"></span></a><a name="model.subresource.find.all">model.subresource.find.all</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.subresource.find.all</span>
<span class="sd"> *</span>
<span class="sd"> * Called when attempting to find all subresources of a resource</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model that represents the owner of the sub-resources</span>
<span class="sd"> * @param (String) (subresource_name) the name of the sub-resource</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) list of sub-resource models</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="nx">ERestEvent</span><span class="o">::</span><span class="na">MODEL_SUBRESOURCES_FIND_ALL</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getSubresourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getSubresource</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsubresourcefindall" class="anchor" href="#prefiltermodelsubresourcefindall"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.subresource.find.all">pre.filter.model.subresource.find.all</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.subresource.find.all'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">];</span> <span class="c1">//Array [Object, String]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsubresourcefindall" class="anchor" href="#postfiltermodelsubresourcefindall"><span class="octicon octicon-link"></span></a><a name="post.filter.model.subresource.find.all">post.filter.model.subresource.find.all</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.subresource.find.all'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array[Object]</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsubresourcecount" class="anchor" href="#modelsubresourcecount"><span class="octicon octicon-link"></span></a><a name="model.subresource.count">model.subresource.count</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.subresource.count</span>
<span class="sd"> *</span>
<span class="sd"> * Called when the count of sub-resources is needed</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model that represents the owner of the sub-resource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the sub-resource</span>
<span class="sd"> * @param (Mixed/Int) (subresource_id) the primary key of the sub-resource</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Int) count of the subresources</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.subresource.count'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="o">=</span><span class="k">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getSubresourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getSubresourceCount</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsubresourcecount" class="anchor" href="#prefiltermodelsubresourcecount"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.subresource.count">pre.filter.model.subresource.count</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.subresource.count'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="o">=</span><span class="k">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="o">=</span><span class="k">null</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsubresourcecount" class="anchor" href="#postfiltermodelsubresourcecount"><span class="octicon octicon-link"></span></a><a name="post.filter.model.subresource.count">post.filter.model.subresource.count</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.subresource.count'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Int</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelapplypostdata" class="anchor" href="#modelapplypostdata"><span class="octicon octicon-link"></span></a><a name="model.apply.post.data">model.apply.post.data</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.apply.post.data</span>
<span class="sd"> *</span>
<span class="sd"> * Called on POST requests when attempting to apply posted data</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the resource model to save data to</span>
<span class="sd"> * @param (Array) (data) the data to save to the model</span>
<span class="sd"> * @param (Array) (restricted_properties) list of restricted properties</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the model with posted data applied</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.apply.post.data'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getResourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setModelAttributes</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelapplypostdata" class="anchor" href="#prefiltermodelapplypostdata"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.apply.post.data">pre.filter.model.apply.post.data</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.apply.post.data'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">];</span> <span class="c1">//Array []</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelapplypostdata" class="anchor" href="#postfiltermodelapplypostdata"><span class="octicon octicon-link"></span></a><a name="post.filter.model.apply.post.data">post.filter.model.apply.post.data</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.apply.post.data'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelapplyputdata" class="anchor" href="#modelapplyputdata"><span class="octicon octicon-link"></span></a><a name="model.apply.put.data">model.apply.put.data</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.apply.put.data</span>
<span class="sd"> *</span>
<span class="sd"> * Called on PUT requests when attempting to apply PUT data</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the resource model to save data to</span>
<span class="sd"> * @param (Array) (data) the data to save to the model</span>
<span class="sd"> * @param (Array) (restricted_properties) list of restricted properties</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the model with PUT data applied</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.apply.put.data'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getResourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setModelAttributes</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelapplyputdata" class="anchor" href="#prefiltermodelapplyputdata"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.apply.put.data">pre.filter.model.apply.put.data</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.apply.put.data'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$restricted_properties</span><span class="p">];</span> <span class="c1">//Array [Object, Array, Array]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelapplyputdata" class="anchor" href="#postfiltermodelapplyputdata"><span class="octicon octicon-link"></span></a><a name="post.filter.model.apply.put.data">post.filter.model.apply.put.data</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.apply.put.data'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsave" class="anchor" href="#modelsave"><span class="octicon octicon-link"></span></a><a name="model.save">model.save</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.save</span>
<span class="sd"> *</span>
<span class="sd"> * Called whenever a model resource is saved</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) the resource model to save</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the saved resource</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.save'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">CHttpException</span><span class="p">(</span><span class="s1">'400'</span><span class="p">,</span> <span class="nx">CJSON</span><span class="o">::</span><span class="na">encode</span><span class="p">(</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">();</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsave" class="anchor" href="#prefiltermodelsave"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.save">pre.filter.model.save</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.save'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsave" class="anchor" href="#postfiltermodelsave"><span class="octicon octicon-link"></span></a><a name="post.filter.model.save">post.filter.model.save</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.save'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsubresourcessave" class="anchor" href="#modelsubresourcessave"><span class="octicon octicon-link"></span></a><a name="model.subresources.save">model.subresources.save</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.subresources.save</span>
<span class="sd"> *</span>
<span class="sd"> * Called whenever a sub-resource is saved</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the owner of the sub-resource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the subresource</span>
<span class="sd"> * @param (Mixed/Int) (subresource_id) the primary key of the subresource</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the updated model representing the owner of the sub-resource</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="nx">ERestEvent</span><span class="o">::</span><span class="na">MODEL_SUBRESOURCE_SAVE</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getSubresourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">putSubresourceHelper</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">CHttpException</span><span class="p">(</span><span class="s1">'500'</span><span class="p">,</span> <span class="s1">'Could not save Sub-Resource'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">();</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsubresourcessave" class="anchor" href="#prefiltermodelsubresourcessave"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.subresources.save">pre.filter.model.subresources.save</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.subresources.save'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsubresourcessave" class="anchor" href="#postfiltermodelsubresourcessave"><span class="octicon octicon-link"></span></a><a name="post.filter.model.subresources.save">post.filter.model.subresources.save</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.subresources.save'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modeldelete" class="anchor" href="#modeldelete"><span class="octicon octicon-link"></span></a><a name="model.delete">model.delete</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.delete</span>
<span class="sd"> *</span>
<span class="sd"> * Called whenever a model resource needs deleting</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the model resource to be deleted</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.delete'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">CHttpException</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="s1">'Could not delete model'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodeldelete" class="anchor" href="#prefiltermodeldelete"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.delete">pre.filter.model.delete</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.delete'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodeldelete" class="anchor" href="#postfiltermodeldelete"><span class="octicon octicon-link"></span></a><a name="post.filter.model.delete">post.filter.model.delete</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.delete'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelsubresourcedelete" class="anchor" href="#modelsubresourcedelete"><span class="octicon octicon-link"></span></a><a name="model.subresource.delete">model.subresource.delete</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.subresource.delete</span>
<span class="sd"> *</span>
<span class="sd"> * Called whenever a subresource needs deleting</span>
<span class="sd"> *</span>
<span class="sd"> * @param (Object) (model) the owner of the sub-resource</span>
<span class="sd"> * @param (String) (subresource_name) the name of the subresource</span>
<span class="sd"> * @param (Mixed/Int) (subresource_id) the primary key of the subresource</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Object) the updated model representing the owner of the sub-resource</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.subresource.delete'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getSubresourceHelper</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">deleteSubResource</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">CHttpException</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="s1">'Could not delete Sub-Resource'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">();</span>
    <span class="k">return</span> <span class="nv">$model</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelsubresourcedelete" class="anchor" href="#prefiltermodelsubresourcedelete"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.subresource.delete">pre.filter.model.subresource.delete</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.subresource.delete'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="nv">$model</span><span class="p">,</span> <span class="nv">$subresource_name</span><span class="p">,</span> <span class="nv">$subresource_id</span><span class="p">];</span> <span class="c1">//Array [Object, String, Int]</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelsubresourcedelete" class="anchor" href="#postfiltermodelsubresourcedelete"><span class="octicon octicon-link"></span></a><a name="post.filter.model.subresource.delete">post.filter.model.subresource.delete</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.subresource.delete'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Object</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelrestrictedproperties" class="anchor" href="#modelrestrictedproperties"><span class="octicon octicon-link"></span></a><a name="model.restricted.properties">model.restricted.properties</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.restricted.properties</span>
<span class="sd"> *</span>
<span class="sd"> * Called when determining which properties if any should be considered restricted</span>
<span class="sd"> * The default is [] (no restricted properties)</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) list of restricted properties</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.restricted.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelrestrictedproperties" class="anchor" href="#prefiltermodelrestrictedproperties"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.restricted.properties">pre.filter.model.restricted.properties</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.restricted.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelrestrictedproperties" class="anchor" href="#postfiltermodelrestrictedproperties"><span class="octicon octicon-link"></span></a><a name="post.filter.model.restricted.properties">post.filter.model.restricted.properties</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.restricted.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelvisibleproperties" class="anchor" href="#modelvisibleproperties"><span class="octicon octicon-link"></span></a><a name="model.visible.properties">model.visible.properties</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.visible.properties</span>
<span class="sd"> *</span>
<span class="sd"> * Called when determining which properties if any should be considered visible</span>
<span class="sd"> * The default is [] (no hidden properties)</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) list of visible properties</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.visible.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelvisibleproperties" class="anchor" href="#prefiltermodelvisibleproperties"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.visible.properties">pre.filter.model.visible.properties</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.visible.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelvisibleproperties" class="anchor" href="#postfiltermodelvisibleproperties"><span class="octicon octicon-link"></span></a><a name="post.filter.model.visible.properties">post.filter.model.visible.properties</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.visible.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="modelhiddenproperties" class="anchor" href="#modelhiddenproperties"><span class="octicon octicon-link"></span></a><a name="model.hidden.properties">model.hidden.properties</a>
</h3>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * model.hidden.properties</span>
<span class="sd"> *</span>
<span class="sd"> * Called when determining which properties if any should be considered hidden</span>
<span class="sd"> * The default is [] (no hidden properties)</span>
<span class="sd"> *</span>
<span class="sd"> * @return (Array) list of hidden properties</span>
<span class="sd"> */</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'model.hidden.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="prefiltermodelhiddenproperties" class="anchor" href="#prefiltermodelhiddenproperties"><span class="octicon octicon-link"></span></a><a name="pre.filter.model.hidden.properties">pre.filter.model.hidden.properties</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'pre.filter.model.hidden.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//No return</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="postfiltermodelhiddenproperties" class="anchor" href="#postfiltermodelhiddenproperties"><span class="octicon octicon-link"></span></a><a name="post.filter.model.hidden.properties">post.filter.model.hidden.properties</a>
</h4>

<div class="highlight highlight-php"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">onRest</span><span class="p">(</span><span class="s1">'post.filter.model.hidden.properties'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span> <span class="c1">//Array</span>
<span class="p">});</span>
</pre></div>

<h2>
<a name="testing" class="anchor" href="#testing"><span class="octicon octicon-link"></span></a>Testing</h2>

<p>Running the project's automated tests.</p>

<h3>
<a name="unit-tests" class="anchor" href="#unit-tests"><span class="octicon octicon-link"></span></a>Unit Tests</h3>

<ol>
<li>Make sure you that you have the correct database and database user in the test config 
(/WEB_ROOT/protected/extensions/starship/RestfullYii/tests/testConfig.php).</li>
<li>% cd /WEB_ROOT/protected/extensions/starship/RestfullYii/tests</li>
<li>% phpunit unit/</li>
</ol><h2>
<a name="contributors" class="anchor" href="#contributors"><span class="octicon octicon-link"></span></a>Contributors</h2>

<ul>
<li><a href="https://github.com/evan108108">evan108108</a></li>
<li><a href="https://github.com/goliatone">goliatone</a></li>
<li><a href="https://github.com/ubin">ubin</a></li>
<li><a href="https://github.com/jlsalvador">jlsalvador</a></li>
<li><a href="https://github.com/ericmcgill">ericmcgill</a></li>
<li><a href="https://github.com/stianlik">stianlik</a></li>
<li><a href="https://github.com/kachar">kachar</a></li>
<li><a href="https://github.com/drLev">drLev</a></li>
<li><a href="https://github.com/sheershoff">sheershoff</a></li>
<li><a href="https://github.com/Arne-S">Arne-S</a></li>
<li><a href="https://github.com/amesmoey">amesmoey</a></li>
<li><a href="https://github.com/eligundry">eligundry</a></li>
<li><a href="https://github.com/rominawnc">rominawnc</a></li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Starship / RestfullYii is released under the WTFPL license - <a href="http://sam.zoy.org/wtfpl/">http://sam.zoy.org/wtfpl/</a>. This means that you can literally do whatever you want with this extension.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Restfullyii maintained by <a href="https://github.com/evan108108">evan108108</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
